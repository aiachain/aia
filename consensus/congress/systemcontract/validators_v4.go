package systemcontract

import (
	"math/big"

	"github.com/ethereum/go-ethereum/common"
	"github.com/ethereum/go-ethereum/core"
	"github.com/ethereum/go-ethereum/core/state"
	"github.com/ethereum/go-ethereum/core/types"
	"github.com/ethereum/go-ethereum/log"
	"github.com/ethereum/go-ethereum/params"
)

const (
	validatorsV4Code = "0x608060405260043610620003da5760003560e01c80639cc02c3011620001ff578063c885bc58116200011b578063eb60b22411620000af578063f3b1cc671162000079578063f3b1cc671462000cf8578063f40f0f521462000d10578063f851a4401462000d47578063f8d9a44b1462000d5f57620003da565b8063eb60b2241462000c65578063ec0cb336146200044f578063f04a5dcd1462000c93578063f14693821462000cc457620003da565b8063ce8ef37211620000f1578063ce8ef3721462000c13578063d6c0edad1462000c2b578063dbeffe261462000c35578063def116f31462000c4d57620003da565b8063c885bc581462000bac578063c967f90f1462000bc4578063cd2192f11462000bf357620003da565b8063b34f88e81162000193578063bcecf81b1162000169578063bcecf81b1462000b17578063be1ff5d91462000b45578063bed998501462000b5d578063c3ab25101462000b7557620003da565b8063b34f88e81462000a96578063bb8b65af1462000aae578063bbc716801462000ac657620003da565b8063a676bd8511620001d5578063a676bd851462000a20578063a7565c511462000a38578063adb86e251462000a50578063afeea1151462000a7e57620003da565b80639cc02c3014620009c25780639de7025814620009da5780639e4fe1f614620009f257620003da565b80635274ac3f11620002fb5780636d379efe116200028f578063741579b11162000259578063741579b114620009125780638f283970146200092a5780638fffcbd014620009615780639001eed814620009aa57620003da565b80636d379efe14620008b25780636ea69d6214620008ca57806371a1bb7514620008e257806371df767814620008fa57620003da565b806360544bf111620002d157806360544bf1146200074057806365bb877f14620007aa57806365f69f9714620007c25780636846992a14620007f957620003da565b80635274ac3f14620005b15780635528fe0a14620006fa5780635e630648146200072857620003da565b80632e4f67e4116200037357806341fbb050116200034957806341fbb050146200053557806344f999001462000569578063455ab41e14620005815780634c990317146200059957620003da565b80632e4f67e4146200044f5780633a82fd5e14620004d65780633fa1b5bc146200051d57620003da565b806315de360e11620003b557806315de360e146200044f5780631a29069214620004675780631c0ffaa2146200047f578063238a54f914620004be57620003da565b806303fab4f614620003df578063136ec0b31462000409578063158ef93e1462000423575b600080fd5b348015620003ec57600080fd5b50620003f762000d8d565b60408051918252519081900360200190f35b3480156200041657600080fd5b506200042162000d9a565b005b3480156200043057600080fd5b506200043b62000fe5565b604080519115158252519081900360200190f35b3480156200045c57600080fd5b50620003f762000fee565b3480156200047457600080fd5b50620003f762000ff5565b3480156200048c57600080fd5b506200042160048036036040811015620004a557600080fd5b506001600160a01b038135169060200135151562000ffb565b348015620004cb57600080fd5b50620003f76200111b565b348015620004e357600080fd5b506200050760048036036020811015620004fc57600080fd5b503560ff1662001121565b6040805160ff9092168252519081900360200190f35b3480156200052a57600080fd5b50620003f762001136565b3480156200054257600080fd5b506200054d6200113c565b604080516001600160a01b039092168252519081900360200190f35b3480156200057657600080fd5b506200054d6200114b565b3480156200058e57600080fd5b50620003f762001151565b348015620005a657600080fd5b50620003f762001157565b348015620005be57600080fd5b506200042160048036036060811015620005d757600080fd5b810190602081018135640100000000811115620005f357600080fd5b8201836020820111156200060657600080fd5b803590602001918460208302840111640100000000831117156200062957600080fd5b91908080602002602001604051908101604052809392919081815260200183836020028082843760009201919091525092959493602081019350359150506401000000008111156200067a57600080fd5b8201836020820111156200068d57600080fd5b80359060200191846020830284011164010000000083111715620006b057600080fd5b919080806020026020016040519081016040528093929190818152602001838360200280828437600092019190915250929550505090356001600160a01b031691506200115d9050565b3480156200070757600080fd5b5062000421600480360360208110156200072057600080fd5b503562001554565b3480156200073557600080fd5b50620003f7620015e1565b3480156200074d57600080fd5b5062000758620015e7565b60408051602080825283518183015283519192839290830191858101910280838360005b83811015620007965781810151838201526020016200077c565b505050509050019250505060405180910390f35b348015620007b757600080fd5b50620003f76200164b565b348015620007cf57600080fd5b506200054d60048036036020811015620007e857600080fd5b50356001600160a01b031662001651565b3480156200080657600080fd5b5062000421600480360360408110156200081f57600080fd5b8101906020810181356401000000008111156200083b57600080fd5b8201836020820111156200084e57600080fd5b803590602001918460208302840111640100000000831117156200087157600080fd5b91908080602002602001604051908101604052809392919081815260200183836020028082843760009201919091525092955050913592506200166c915050565b348015620008bf57600080fd5b50620003f762001b1d565b348015620008d757600080fd5b506200054d62001b23565b348015620008ef57600080fd5b506200054d62001b29565b3480156200090757600080fd5b506200042162001b2f565b3480156200091f57600080fd5b50620003f762001cbe565b3480156200093757600080fd5b5062000421600480360360208110156200095057600080fd5b50356001600160a01b031662001cca565b3480156200096e57600080fd5b5062000421600480360360808110156200098757600080fd5b5060ff813581169160208101358216916040820135811691606001351662001dc2565b348015620009b757600080fd5b50620003f762001f27565b348015620009cf57600080fd5b50620003f762001f35565b348015620009e757600080fd5b506200075862001f3b565b348015620009ff57600080fd5b50620004216004803603602081101562000a1857600080fd5b503562001f9d565b34801562000a2d57600080fd5b50620003f76200202a565b34801562000a4557600080fd5b506200042162002030565b34801562000a5d57600080fd5b50620004216004803603602081101562000a7657600080fd5b5035620020d5565b34801562000a8b57600080fd5b506200075862002162565b34801562000aa357600080fd5b50620003f762002465565b34801562000abb57600080fd5b50620004216200246b565b34801562000ad357600080fd5b506200054d6004803603608081101562000aec57600080fd5b5080356001600160a01b03908116916020810135909116906040810135906060013560ff16620026b1565b34801562000b2457600080fd5b506200054d6004803603602081101562000b3d57600080fd5b50356200289b565b34801562000b5257600080fd5b506200054d620028c3565b34801562000b6a57600080fd5b50620003f7620028c9565b34801562000b8257600080fd5b50620004216004803603602081101562000b9b57600080fd5b50356001600160a01b0316620028cf565b34801562000bb957600080fd5b506200042162002975565b34801562000bd157600080fd5b5062000bdc620029dd565b6040805161ffff9092168252519081900360200190f35b620004216004803603602081101562000c0b57600080fd5b5035620029e2565b34801562000c2057600080fd5b50620003f762002a67565b6200042162002a6d565b34801562000c4257600080fd5b50620003f76200303b565b34801562000c5a57600080fd5b50620003f762003041565b34801562000c7257600080fd5b50620004216004803603602081101562000c8b57600080fd5b503562003047565b34801562000ca057600080fd5b50620005076004803603602081101562000cb957600080fd5b503560ff166200311c565b34801562000cd157600080fd5b50620004216004803603604081101562000cea57600080fd5b508035906020013562003131565b34801562000d0557600080fd5b50620003f76200321f565b34801562000d1d57600080fd5b50620003f76004803603602081101562000d3657600080fd5b50356001600160a01b031662003226565b34801562000d5457600080fd5b506200054d62003238565b34801562000d6c57600080fd5b50620004216004803603602081101562000d8557600080fd5b50356200324c565b68056bc75e2d6310000081565b6000339050806001600160a01b031660076000836001600160a01b0316633a5381b56040518163ffffffff1660e01b815260040160206040518083038186803b15801562000de757600080fd5b505afa15801562000dfc573d6000803e3d6000fd5b505050506040513d602081101562000e1357600080fd5b50516001600160a01b039081168252602082019290925260400160002054161462000e80576040805162461bcd60e51b8152602060048201526018602482015277159bdd19481c1bdbdb081b9bdd081c9959da5cdd195c995960421b604482015290519081900360640190fd5b336001816001600160a01b031663c19d93fb6040518163ffffffff1660e01b815260040160206040518083038186803b15801562000ebd57600080fd5b505afa15801562000ed2573d6000803e3d6000fd5b505050506040513d602081101562000ee957600080fd5b5051600381111562000ef757fe5b1462000f3c576040805162461bcd60e51b815260206004820152600f60248201526e496e636f727265637420737461746560881b604482015290519081900360640190fd5b6000600a6000836001600160a01b031663683c529c6040518163ffffffff1660e01b815260040160206040518083038186803b15801562000f7c57600080fd5b505afa15801562000f91573d6000803e3d6000fd5b505050506040513d602081101562000fa857600080fd5b5051600181111562000fb657fe5b600181111562000fc257fe5b81526020810191909152604001600020905062000fe08183620032d9565b505050565b60005460ff1681565b6201518081565b60115490565b60005461010090046001600160a01b031633146200104d576040805162461bcd60e51b815260206004820152600a60248201526927b7363c9030b236b4b760b11b604482015290519081900360640190fd5b6001600160a01b0382811660009081526007602052604090205416620010a55760405162461bcd60e51b8152600401808060200182810382526021815260200180620073096021913960400191505060405180910390fd5b6001600160a01b03808316600090815260076020526040808220548151638ec7a23d60e01b815285151560048201529151931692638ec7a23d9260248084019391929182900301818387803b158015620010fe57600080fd5b505af115801562001113573d6000803e3d6000fd5b505050505050565b60115481565b60016020526000908152604090205460ff1681565b60125481565b600c546001600160a01b031681565b61f00681565b600f5481565b60105481565b60005460ff1615620011ac576040805162461bcd60e51b8152602060048201526013602482015272105b1c9958591e481a5b9a5d1a585b1a5e9959606a1b604482015290519081900360640190fd5b60008351118015620011bf575081518351145b62001202576040805162461bcd60e51b815260206004820152600e60248201526d496e76616c696420706172616d7360901b604482015290519081900360640190fd5b6001600160a01b03811662001256576040805162461bcd60e51b8152602060048201526015602482015274496e76616c69642061646d696e206164647265737360581b604482015290519081900360640190fd5b60008054600160ff199091168117610100600160a81b0319166101006001600160a01b03851602178255818060018111156200128e57fe5b815260200190815260200160002060006101000a81548160ff021916908360ff160217905550601560016000600180811115620012c757fe5b6001811115620012d357fe5b81526020808201929092526040016000908120805460ff9490941660ff1994851617905560029091527fac33ff75c19e70fe83507db0d683fd3465c996598dc972688b7ace676c89077b805483169055600181527fe90b7bceb6e7df5418fb78d8ee546e97c83a08bbccc01a0644d599ccd2a7c2e080549092169091555b83518160ff1610156200154e576000848260ff16815181106200137057fe5b6020908102919091018101516001600160a01b03808216600090815260079093526040909220549092501615620013ea576040805162461bcd60e51b815260206004820152601960248201527856616c696461746f727320616c72656164792065786973747360381b604482015290519081900360640190fd5b600081858460ff1681518110620013fd57fe5b6020026020010151612710600180604051620014199062004198565b80866001600160a01b03168152602001856001600160a01b031681526020018481526020018360018111156200144b57fe5b81526020018260038111156200145d57fe5b815260200195505050505050604051809103906000f08015801562001486573d6000803e3d6000fd5b5060068054600181019091557ff652222313e28459528d920b65115c16c04f3efc82aaedc97be59f3f377c0d3f0180546001600160a01b038086166001600160a01b031992831681179093556000928352600760205260408084208054928616929093168217909255815163204a7f0760e21b8152915193945092638129fc1c9260048084019391929182900301818387803b1580156200152657600080fd5b505af11580156200153b573d6000803e3d6000fd5b5050600190940193506200135192505050565b50505050565b60005461010090046001600160a01b03163314620015a6576040805162461bcd60e51b815260206004820152600a60248201526927b7363c9030b236b4b760b11b604482015290519081900360640190fd5b60158190556040805182815290517f9994065c63af49d87610e52d67ce60f8875fda845e4e91ddc0fce302623a3c169181900360200190a150565b600f5490565b606060048054806020026020016040519081016040528092919081815260200182805480156200164157602002820191906000526020600020905b81546001600160a01b0316815260019091019060200180831162001622575b5050505050905090565b60155481565b6007602052600090815260409020546001600160a01b031681565b334114620016ae576040805162461bcd60e51b815260206004820152600a6024820152694d696e6572206f6e6c7960b01b604482015290519081900360640190fd5b436000908152600b60209081526040808320600180855292529091205460ff161562001714576040805162461bcd60e51b815260206004820152601060248201526f105b1c9958591e481bdc195c985d195960821b604482015290519081900360640190fd5b818043816200171f57fe5b061562001766576040805162461bcd60e51b815260206004820152601060248201526f426c6f636b2065706f6368206f6e6c7960801b604482015290519081900360640190fd5b60005460ff16620017ad576040805162461bcd60e51b815260206004820152600c60248201526b139bdd081a5b9a5d081e595d60a21b604482015290519081900360640190fd5b436000908152600b60209081526040808320600180855292528220805460ff191690911790555b60035460ff82161015620018395760006005600060038460ff1681548110620017f957fe5b6000918252602080832091909101546001600160a01b031683528201929092526040019020805460ff191660ff92909216919091179055600101620017d4565b5083516200184f906003906020870190620041a6565b5060005b60035460ff82161015620018b85760016005600060038460ff16815481106200187857fe5b6000918252602080832091909101546001600160a01b031683528201929092526040019020805460ff191660ff9290921691909117905560010162001853565b50620018c76004600062004210565b620018d162004230565b50604080518082019091526000808252600160208301525b60028160ff1610156200111357600060026000848460ff16600281106200190c57fe5b602002015160018111156200191d57fe5b60018111156200192957fe5b815260200190815260200160002060009054906101000a900460ff1690506000600a6000858560ff16600281106200195d57fe5b602002015160018111156200196e57fe5b60018111156200197a57fe5b8152602081019190915260400160002080549091506001600160a01b03165b60008360ff16118015620019b557506001600160a01b03811615155b1562001b115760056000826001600160a01b0316633a5381b56040518163ffffffff1660e01b815260040160206040518083038186803b158015620019f957600080fd5b505afa15801562001a0e573d6000803e3d6000fd5b505050506040513d602081101562001a2557600080fd5b50516001600160a01b0316815260208101919091526040016000205460ff1662001aee576004816001600160a01b0316633a5381b56040518163ffffffff1660e01b815260040160206040518083038186803b15801562001a8557600080fd5b505afa15801562001a9a573d6000803e3d6000fd5b505050506040513d602081101562001ab157600080fd5b505181546001810183556000928352602090922090910180546001600160a01b0319166001600160a01b0390921691909117905560001992909201915b6001600160a01b0390811660009081526003830160205260409020541662001999565b505050600101620018e9565b60105490565b61f00a81565b61f00581565b6000339050806001600160a01b031660076000836001600160a01b0316633a5381b56040518163ffffffff1660e01b815260040160206040518083038186803b15801562001b7c57600080fd5b505afa15801562001b91573d6000803e3d6000fd5b505050506040513d602081101562001ba857600080fd5b50516001600160a01b039081168252602082019290925260400160002054161462001c15576040805162461bcd60e51b8152602060048201526018602482015277159bdd19481c1bdbdb081b9bdd081c9959da5cdd195c995960421b604482015290519081900360640190fd5b60003390506000600a6000836001600160a01b031663683c529c6040518163ffffffff1660e01b815260040160206040518083038186803b15801562001c5a57600080fd5b505afa15801562001c6f573d6000803e3d6000fd5b505050506040513d602081101562001c8657600080fd5b5051600181111562001c9457fe5b600181111562001ca057fe5b81526020810191909152604001600020905062000fe0818362003897565b670de0b6b3a764000081565b806001600160a01b03811662001d19576040805162461bcd60e51b815260206004820152600f60248201526e496e76616c6964206164647265737360881b604482015290519081900360640190fd5b60005461010090046001600160a01b0316331462001d6b576040805162461bcd60e51b815260206004820152600a60248201526927b7363c9030b236b4b760b11b604482015290519081900360640190fd5b60008054610100600160a81b0319166101006001600160a01b03858116820292909217808455604051919004909116917f927cc064d7b7fa546fa7706bc01845d27d06f15af3ae90a672cc44735928e96191a25050565b60005461010090046001600160a01b0316331462001e14576040805162461bcd60e51b815260206004820152600a60248201526927b7363c9030b236b4b760b11b604482015290519081900360640190fd5b7fa6eef7e35abe7026729641147f7915573c7e97b47efa546f5f6e3230263bcb49805460ff86811660ff1992831681179093557fcc69885fda6bcc1a4ace058b4a62bf5e179ea78fd58a1ccd71c22cc9b688792f80548683169084168117909155600260209081527fac33ff75c19e70fe83507db0d683fd3465c996598dc972688b7ace676c89077b8054851689851690811790915560016000527fe90b7bceb6e7df5418fb78d8ee546e97c83a08bbccc01a0644d599ccd2a7c2e080549095169387169384179094556040805195865290850193909352838301526060830152517fef8fc40942f0314a9f5ebd7832ff1b78e6c4b5b7062355066b0c0e3e0edc6f29916080908290030190a150505050565b69010f0cf064dd5920000081565b60065490565b6060600380548060200260200160405190810160405280929190818152602001828054801562001641576020028201919060005260206000209081546001600160a01b0316815260019091019060200180831162001622575050505050905090565b60005461010090046001600160a01b0316331462001fef576040805162461bcd60e51b815260206004820152600a60248201526927b7363c9030b236b4b760b11b604482015290519081900360640190fd5b60128190556040805182815290517ff40547fdb26960fba44451ee3a523ea2e2b7540268a69d01b4fbfc9c8dd0bab29181900360200190a150565b60145490565b600c546001600160a01b0316331462002082576040805162461bcd60e51b815260206004820152600f60248201526e27b7363c903337bab73230ba34b7b760891b604482015290519081900360640190fd5b600d8054600090915562002097338262003a8c565b604080513381526020810183905281517f2370ce4725209567266acc459e3a571cc7cf844d502af9501f652f9b23ada7d8929181900390910190a150565b60005461010090046001600160a01b0316331462002127576040805162461bcd60e51b815260206004820152600a60248201526927b7363c9030b236b4b760b11b604482015290519081900360640190fd5b60118190556040805182815290517fc655db38b58717d787d906357d6baa94592580f07107087a8e36802e8a3c42f49181900360200190a150565b606060006200217062004230565b50604080518082019091526000808252600160208301525b60028160ff16101562002283576000828260ff1660028110620021a757fe5b602002015190506000600a6000836001811115620021c157fe5b6001811115620021cd57fe5b8152602001908152602001600020905060016000836001811115620021ee57fe5b6001811115620021fa57fe5b8152602081019190915260400160002054600182015460ff918216600160a01b909104909116101562002241576001810154600160a01b900460ff16949094019362002278565b600160008360018111156200225257fe5b60018111156200225e57fe5b815260208101919091526040016000205460ff1694909401935b505060010162002188565b5060608260ff1667ffffffffffffffff81118015620022a157600080fd5b50604051908082528060200260200182016040528015620022cc578160200160208202803683370190505b5090506000805b60028160ff1610156200245b576000848260ff1660028110620022f257fe5b602002015190506000600a60008360018111156200230c57fe5b60018111156200231857fe5b815260200190815260200160002090506000600160008460018111156200233b57fe5b60018111156200234757fe5b8152602081019190915260400160002054825460ff90911691506001600160a01b03165b60008260ff161180156200238757506001600160a01b03811615155b156200244a57806001600160a01b0316633a5381b56040518163ffffffff1660e01b815260040160206040518083038186803b158015620023c757600080fd5b505afa158015620023dc573d6000803e3d6000fd5b505050506040513d6020811015620023f357600080fd5b50518751889060ff89169081106200240757fe5b6001600160a01b0392831660209182029290920181019190915291811660009081526003850190925260409091205460019096019560001990920191166200236b565b505060019092019150620022d39050565b5090935050505090565b600d5481565b6000339050806001600160a01b031660076000836001600160a01b0316633a5381b56040518163ffffffff1660e01b815260040160206040518083038186803b158015620024b857600080fd5b505afa158015620024cd573d6000803e3d6000fd5b505050506040513d6020811015620024e457600080fd5b50516001600160a01b039081168252602082019290925260400160002054161462002551576040805162461bcd60e51b8152602060048201526018602482015277159bdd19481c1bdbdb081b9bdd081c9959da5cdd195c995960421b604482015290519081900360640190fd5b336001816001600160a01b031663c19d93fb6040518163ffffffff1660e01b815260040160206040518083038186803b1580156200258e57600080fd5b505afa158015620025a3573d6000803e3d6000fd5b505050506040513d6020811015620025ba57600080fd5b50516003811115620025c857fe5b146200260d576040805162461bcd60e51b815260206004820152600f60248201526e496e636f727265637420737461746560881b604482015290519081900360640190fd5b6000600a6000836001600160a01b031663683c529c6040518163ffffffff1660e01b815260040160206040518083038186803b1580156200264d57600080fd5b505afa15801562002662573d6000803e3d6000fd5b505050506040513d60208110156200267957600080fd5b505160018111156200268757fe5b60018111156200269357fe5b81526020810191909152604001600020905062000fe0818362003b76565b6000805461010090046001600160a01b0316331462002704576040805162461bcd60e51b815260206004820152600a60248201526927b7363c9030b236b4b760b11b604482015290519081900360640190fd5b6001600160a01b0385811660009081526007602052604090205416156200276e576040805162461bcd60e51b815260206004820152601960248201527856616c696461746f727320616c72656164792065786973747360381b604482015290519081900360640190fd5b6000858585856000604051620027849062004198565b80866001600160a01b03168152602001856001600160a01b03168152602001848152602001836001811115620027b657fe5b8152602001826003811115620027c857fe5b815260200195505050505050604051809103906000f080158015620027f1573d6000803e3d6000fd5b5060068054600181019091557ff652222313e28459528d920b65115c16c04f3efc82aaedc97be59f3f377c0d3f0180546001600160a01b03808a166001600160a01b03199283168117909355600083815260076020908152604091829020805493871693909416831790935580519182525193945091927f1ab57f2e2a6e4069160cc6501d8012d93ed435770b1ed646f82482a2f7234ff49281900390910190a295945050505050565b60068181548110620028a957fe5b6000918252602090912001546001600160a01b0316905081565b61faaa90565b600e5481565b60005461010090046001600160a01b0316331462002921576040805162461bcd60e51b815260206004820152600a60248201526927b7363c9030b236b4b760b11b604482015290519081900360640190fd5b600c80546001600160a01b0383166001600160a01b0319909116811790915560408051918252517ff38729ed26c992c585dcf939cf3ca97e8265d59fbb49df4b96547f3526c439fb9181900360200190a150565b3360009081526009602052604090205480620029925750620029db565b336000818152600960205260408082208290558051600162c261b160e01b03198152905163ff3d9e4f9285926004808201939182900301818588803b158015620010fe57600080fd5b565b601581565b3361f00a1462002a30576040805162461bcd60e51b815260206004820152601460248201527352657761726420636f6e7472616374206f6e6c7960601b604482015290519081900360640190fd5b34811162002a5f57600d5462002a47908262003f4a565b600d5562002a56348262003fae565b60135562002a64565b346013555b50565b60155490565b33411462002aaf576040805162461bcd60e51b815260206004820152600a6024820152694d696e6572206f6e6c7960b01b604482015290519081900360640190fd5b436000908152600b6020908152604080832083805290915281205460ff161562002b13576040805162461bcd60e51b815260206004820152601060248201526f105b1c9958591e481bdc195c985d195960821b604482015290519081900360640190fd5b60005460ff1662002b5a576040805162461bcd60e51b815260206004820152600c60248201526b139bdd081a5b9a5d081e595d60a21b604482015290519081900360640190fd5b436000908152600b60209081526040808320838052909152808220805460ff191660011790558051631910b78b60e31b8152905161f00a9263c885bc58926004808201939182900301818387803b15801562002bb557600080fd5b505af115801562002bca573d6000803e3d6000fd5b50505050600062002bf561271062002bee600e543462003ff290919063ffffffff16565b9062004050565b905062002c0561faaa8262003a8c565b600062002c388262002c3160135462002c2a6008543462003f4a90919063ffffffff16565b9062003f4a565b9062003fae565b600060135590508062002c4d57505062002a64565b600062002c62606462002bee84600a62003ff2565b9050600062002c79606462002bee85602862003ff2565b9050600062002c90606462002bee86603262003ff2565b6004549091501562002e9a576000805b60045460ff8216101562002d675762002d5c6007600060048460ff168154811062002cc757fe5b60009182526020808320909101546001600160a01b03908116845283820194909452604092830190912054825163f1cea4c760e01b8152925193169263f1cea4c7926004808201939291829003018186803b15801562002d2657600080fd5b505afa15801562002d3b573d6000803e3d6000fd5b505050506040513d602081101562002d5257600080fd5b5051839062003f4a565b915060010162002ca0565b50801562002e985760005b60045460ff8216101562002e965760006007600060048460ff168154811062002d9757fe5b60009182526020808320909101546001600160a01b039081168452838201949094526040928301822054835163f1cea4c760e01b8152935194169450909262002e3c92879262002bee92879263f1cea4c7926004808301939192829003018186803b15801562002e0657600080fd5b505afa15801562002e1b573d6000803e3d6000fd5b505050506040513d602081101562002e3257600080fd5b50518a9062003ff2565b6001600160a01b03831660009081526009602052604090205490915062002e64908262003f4a565b6001600160a01b03831660009081526009602052604090205562002e89888262003fae565b9750505060010162002d72565b505b505b6003541562003031576000805b60035460ff8216101562002ed95762002ece6007600060038460ff168154811062002cc757fe5b915060010162002ea7565b5060005b60035460ff821610156200302e5760006007600060038460ff168154811062002f0257fe5b60009182526020808320909101546001600160a01b039081168452908301939093526040909101812054600354921692509062002f4190869062004050565b9050831562002fd757600062002fc58562002bee89866001600160a01b031663f1cea4c76040518163ffffffff1660e01b815260040160206040518083038186803b15801562002f9057600080fd5b505afa15801562002fa5573d6000803e3d6000fd5b505050506040513d602081101562002fbc57600080fd5b50519062003ff2565b905062002fd3828262003f4a565b9150505b6001600160a01b03821660009081526009602052604090205462002ffc908262003f4a565b6001600160a01b03831660009081526009602052604090205562003021888262003fae565b9750505060010162002edd565b50505b5050506008555050565b60125490565b60145481565b60005461010090046001600160a01b0316331462003099576040805162461bcd60e51b815260206004820152600a60248201526927b7363c9030b236b4b760b11b604482015290519081900360640190fd5b612710811115620030e1576040805162461bcd60e51b815260206004820152600d60248201526c496e76616c696420726174657360981b604482015290519081900360640190fd5b60148190556040805182815290517f8195da279b9b52fc2c461fb2c7f75f10c7ce8ece7a8bbb62877e1c5f22e567359181900360200190a150565b60026020526000908152604090205460ff1681565b60005461010090046001600160a01b0316331462003183576040805162461bcd60e51b815260206004820152600a60248201526927b7363c9030b236b4b760b11b604482015290519081900360640190fd5b61271062003192838362003f4a565b1115620031d6576040805162461bcd60e51b815260206004820152600d60248201526c496e76616c696420726174657360981b604482015290519081900360640190fd5b600e829055600f819055604080518381526020810183905281517f534c90d33ce4af09747aca8d4f972eb070811868adeba0df97346a9c6d5e948b929181900390910190a15050565b6206270081565b60096020526000908152604090205481565b60005461010090046001600160a01b031681565b60005461010090046001600160a01b031633146200329e576040805162461bcd60e51b815260206004820152600a60248201526927b7363c9030b236b4b760b11b604482015290519081900360640190fd5b60108190556040805182815290517f750591731641aad7f7bcdc14dd723780e93daf24f0ddcc16146393c56d3d479a9181900360200190a150565b6001820154600160a01b900460ff166200333e5781546001600160a01b0382166001600160a01b0319918216811784556001808501805460ff600160a01b91909516909317838104851690920190931690910260ff60a01b1990911617905562003893565b81546001600160a01b03828116911614156200335a5762003893565b6001600160a01b038082166000908152600284016020526040902054168062003503576001808401805460ff600160a01b80830482169094011690920260ff60a01b1990921691909117908190556040805163f1cea4c760e01b815290516001600160a01b039092169163f1cea4c791600480820192602092909190829003018186803b158015620033eb57600080fd5b505afa15801562003400573d6000803e3d6000fd5b505050506040513d60208110156200341757600080fd5b50516040805163f1cea4c760e01b815290516001600160a01b0385169163f1cea4c7916004808301926020929190829003018186803b1580156200345a57600080fd5b505afa1580156200346f573d6000803e3d6000fd5b505050506040513d60208110156200348657600080fd5b505111620034ee57506001820180546001600160a01b038381166000818152600287016020908152604080832080549686166001600160a01b031997881617905586549094168252600388019052919091208054831682179055825490911617905562003893565b5060018201546001600160a01b03166200369a565b806001600160a01b031663f1cea4c76040518163ffffffff1660e01b815260040160206040518083038186803b1580156200353d57600080fd5b505afa15801562003552573d6000803e3d6000fd5b505050506040513d60208110156200356957600080fd5b50516040805163f1cea4c760e01b815290516001600160a01b0385169163f1cea4c7916004808301926020929190829003018186803b158015620035ac57600080fd5b505afa158015620035c1573d6000803e3d6000fd5b505050506040513d6020811015620035d857600080fd5b505111620035e7575062003893565b6001600160a01b038083166000818152600386016020526040808220548585168352912080546001600160a01b0319169184169190911790556001850154909116141562003652576001830180546001600160a01b0319166001600160a01b0383161790556200369a565b6001600160a01b03808316600090815260028501602081815260408084205460038901835281852054861685529290915290912080546001600160a01b031916919092161790555b6001600160a01b03811615801590620037875750806001600160a01b031663f1cea4c76040518163ffffffff1660e01b815260040160206040518083038186803b158015620036e857600080fd5b505afa158015620036fd573d6000803e3d6000fd5b505050506040513d60208110156200371457600080fd5b50516040805163f1cea4c760e01b815290516001600160a01b0385169163f1cea4c7916004808301926020929190829003018186803b1580156200375757600080fd5b505afa1580156200376c573d6000803e3d6000fd5b505050506040513d60208110156200378357600080fd5b5051115b15620037b0576001600160a01b039081166000908152600284016020526040902054166200369a565b6001600160a01b038116620038265782546001600160a01b038381166000818152600387016020908152604080832080549686166001600160a01b031997881617905588549094168252600288019052828120805485168317905581815291909120805483169055845490911617835562000fe0565b6001600160a01b0390811660008181526003850160209081526040808320805487871680865283862080549289166001600160a01b031993841617905582549097168552600289019093528184208054841687179055805483168617905593825292902080549092161790555b5050565b81546001600160a01b03828116911614801590620038cf57506001600160a01b03818116600090815260028401602052604090205416155b15620038db5762003893565b60018201546001600160a01b038281169116141562003928576001600160a01b0380821660009081526002840160205260409020546001840180546001600160a01b031916919092161790555b81546001600160a01b03828116911614156200396c576001600160a01b03808216600090815260038401602052604090205483546001600160a01b03191691161782555b6001600160a01b038082166000908152600384016020526040902054168015620039c8576001600160a01b038083166000908152600285016020526040808220548484168352912080546001600160a01b031916919092161790555b6001600160a01b03808316600090815260028501602052604090205416801562003a24576001600160a01b038084166000908152600386016020526040808220548484168352912080546001600160a01b031916919092161790555b50506001600160a01b03166000908152600282016020908152604080832080546001600160a01b03199081169091556003850190925290912080549091169055600101805460ff60a01b198116600160a01b9182900460ff9081166000190116909102179055565b8047101562003ae2576040805162461bcd60e51b815260206004820152601d60248201527f416464726573733a20696e73756666696369656e742062616c616e6365000000604482015290519081900360640190fd5b6040516000906001600160a01b0384169083908381818185875af1925050503d806000811462003b2f576040519150601f19603f3d011682016040523d82523d6000602084013e62003b34565b606091505b505090508062000fe05760405162461bcd60e51b815260040180806020018281038252603a815260200180620072ae603a913960400191505060405180910390fd5b6001600160a01b03808216600081815260038501602052604090205460018501549083169216148062003bb057506001600160a01b038116155b8062003c915750816001600160a01b031663f1cea4c76040518163ffffffff1660e01b815260040160206040518083038186803b15801562003bf157600080fd5b505afa15801562003c06573d6000803e3d6000fd5b505050506040513d602081101562003c1d57600080fd5b50516040805163f1cea4c760e01b815290516001600160a01b0384169163f1cea4c7916004808301926020929190829003018186803b15801562003c6057600080fd5b505afa15801562003c75573d6000803e3d6000fd5b505050506040513d602081101562003c8c57600080fd5b505111155b1562003c9e575062003893565b6001600160a01b038083166000818152600286016020526040808220548585168352912080546001600160a01b0319169184169190911790558454909116141562003d025782546001600160a01b0319166001600160a01b03821617835562003d44565b6001600160a01b0382811660009081526002850160209081526040808320548416835260038701909152902080546001600160a01b0319169183169190911790555b6001600160a01b0381161580159062003e315750816001600160a01b031663f1cea4c76040518163ffffffff1660e01b815260040160206040518083038186803b15801562003d9257600080fd5b505afa15801562003da7573d6000803e3d6000fd5b505050506040513d602081101562003dbe57600080fd5b50516040805163f1cea4c760e01b815290516001600160a01b0384169163f1cea4c7916004808301926020929190829003018186803b15801562003e0157600080fd5b505afa15801562003e16573d6000803e3d6000fd5b505050506040513d602081101562003e2d57600080fd5b5051115b1562003e5a576001600160a01b0390811660009081526003840160205260409020541662003d44565b6001600160a01b03811662003ed2576001830180546001600160a01b038481166000818152600288016020908152604080832080549686166001600160a01b031997881617905560038a0190915280822080548616905585549093168152919091208054831682179055825490911617905562000fe0565b6001600160a01b0390811660008181526002850160208181526040808420805487168552600390980180835281852080546001600160a01b0319908116998916998a17909155848452895489875283872080549190991690821617909755825283208054861685179055929091529052825416179055565b60008282018381101562003fa5576040805162461bcd60e51b815260206004820152601b60248201527f536166654d6174683a206164646974696f6e206f766572666c6f770000000000604482015290519081900360640190fd5b90505b92915050565b600062003fa583836040518060400160405280601e81526020017f536166654d6174683a207375627472616374696f6e206f766572666c6f77000081525062004094565b600082620040035750600062003fa8565b828202828482816200401157fe5b041462003fa55760405162461bcd60e51b8152600401808060200182810382526021815260200180620072e86021913960400191505060405180910390fd5b600062003fa583836040518060400160405280601a81526020017f536166654d6174683a206469766973696f6e206279207a65726f0000000000008152506200412f565b60008184841115620041275760405162461bcd60e51b81526004018080602001828103825283818151815260200191508051906020019080838360005b83811015620040eb578181015183820152602001620040d1565b50505050905090810190601f168015620041195780820380516001836020036101000a031916815260200191505b509250505060405180910390fd5b505050900390565b60008183620041815760405162461bcd60e51b8152602060048201818152835160248401528351909283926044909101919085019080838360008315620040eb578181015183820152602001620040d1565b5060008385816200418e57fe5b0495945050505050565b613027806200428783390190565b828054828255906000526020600020908101928215620041fe579160200282015b82811115620041fe57825182546001600160a01b0319166001600160a01b03909116178255602090920191600190910190620041c7565b506200420c9291506200424e565b5090565b508054600082559060005260206000209081019062002a6491906200426f565b60405180604001604052806002906020820280368337509192915050565b5b808211156200420c5780546001600160a01b03191681556001016200424f565b5b808211156200420c57600081556001016200427056fe60806040523480156200001157600080fd5b506040516200302738038062003027833981810160405260a08110156200003757600080fd5b50805160208201516040830151606084015160809094015160018055929391929091903361f00514620000b1576040805162461bcd60e51b815260206004820152601860248201527f56616c696461746f727320636f6e7472616374206f6e6c790000000000000000604482015290519081900360640190fd5b846001600160a01b03811662000100576040805162461bcd60e51b815260206004820152600f60248201526e496e76616c6964206164647265737360881b604482015290519081900360640190fd5b846001600160a01b0381166200014f576040805162461bcd60e51b815260206004820152600f60248201526e496e76616c6964206164647265737360881b604482015290519081900360640190fd5b838560018260018111156200016057fe5b1415620001b757612710811115620001b1576040805162461bcd60e51b815260206004820152600f60248201526e125b9d985b1a59081c195c98d95b9d608a1b604482015290519081900360640190fd5b62000235565b620001ee600a620001da6003612710620002c660201b620027811790919060201c565b6200032d60201b620027e31790919060201c565b81111562000235576040805162461bcd60e51b815260206004820152600f60248201526e125b9d985b1a59081c195c98d95b9d608a1b604482015290519081900360640190fd5b6002805462010000600160b01b031916620100006001600160a01b038c81169190910291909117808355600380546001600160a01b031916928c1692909217909155600589905587919060ff1916600183818111156200029157fe5b02179055506002805486919061ff001916610100836003811115620002b257fe5b02179055505050505050505050506200041e565b600082620002d75750600062000327565b82820282848281620002e557fe5b0414620003245760405162461bcd60e51b8152600401808060200182810382526021815260200180620030066021913960400191505060405180910390fd5b90505b92915050565b60006200032483836040518060400160405280601a81526020017f536166654d6174683a206469766973696f6e206279207a65726f0000000000008152506200037760201b60201c565b60008183620004075760405162461bcd60e51b81526004018080602001828103825283818151815260200191508051906020019080838360005b83811015620003cb578181015183820152602001620003b1565b50505050905090810190601f168015620003f95780820380516001836020036101000a031916815260200191505b509250505060405180910390fd5b5060008385816200041457fe5b0495945050505050565b612bd8806200042e6000396000f3fe6080604052600436106102465760003560e01c80638129fc1c11610139578063ba26d9ff116100b6578063ec0cb3361161007a578063ec0cb3361461029b578063ef984eb51461063f578063f06d5e7714610654578063f1cea4c71461067e578063f3b1cc6714610693578063ff3d9e4f146106a857610246565b8063ba26d9ff146105bc578063c19d93fb146105d1578063c967f90f146105f6578063d0e30db014610622578063e9fad8ee1461062a57610246565b806397a8ccd5116100fd57806397a8ccd5146104fe5780639e83d5b114610506578063a3ec138d1461051b578063a3fbbaae14610574578063a6606679146105a757610246565b80638129fc1c1461047e578063826d3dec146104935780638ec7a23d146104a85780638f76691a146104d45780639001eed8146104e957610246565b8063481c6a75116101c7578063697dc3a71161018b578063697dc3a71461040057806370ba11131461041557806371a1bb751461042a57806372a11da41461043f578063741579b11461046957610246565b8063481c6a7514610365578063483a00e81461037a5780634df9d6ba1461038257806358fd41ea146103b5578063683c529c146103ca57610246565b80632e4f67e41161020e5780632e4f67e41461029b5780633a5381b5146102da5780633ccfd60b1461030b57806341f4ca621461032257806344f999001461035057610246565b806303fab4f61461024b578063158ef93e1461027257806315de360e1461029b57806324c5b1ca146102b05780632b8aba7a146102c5575b600080fd5b34801561025757600080fd5b506102606106b0565b60408051918252519081900360200190f35b34801561027e57600080fd5b506102876106bd565b604080519115158252519081900360200190f35b3480156102a757600080fd5b506102606106c6565b3480156102bc57600080fd5b506102606106cd565b3480156102d157600080fd5b506102606106d3565b3480156102e657600080fd5b506102ef6106d9565b604080516001600160a01b039092168252519081900360200190f35b34801561031757600080fd5b506103206106ee565b005b34801561032e57600080fd5b5061033761086c565b6040805192835260208301919091528051918290030190f35b34801561035c57600080fd5b506102ef610875565b34801561037157600080fd5b506102ef61087b565b61032061088a565b34801561038e57600080fd5b50610260600480360360208110156103a557600080fd5b50356001600160a01b0316610c69565b3480156103c157600080fd5b50610260610d8e565b3480156103d657600080fd5b506103df610e31565b604051808260018111156103ef57fe5b815260200191505060405180910390f35b34801561040c57600080fd5b50610260610e3a565b34801561042157600080fd5b50610260610e40565b34801561043657600080fd5b506102ef610e46565b34801561044b57600080fd5b506103206004803603602081101561046257600080fd5b5035610e4c565b34801561047557600080fd5b5061026061116b565b34801561048a57600080fd5b50610320611177565b34801561049f57600080fd5b50610320611273565b3480156104b457600080fd5b50610320600480360360208110156104cb57600080fd5b503515156114cc565b3480156104e057600080fd5b506102606116ba565b3480156104f557600080fd5b506102606116c0565b6103206116ce565b34801561051257600080fd5b5061032061185c565b34801561052757600080fd5b5061054e6004803603602081101561053e57600080fd5b50356001600160a01b0316611bea565b604080519485526020850193909352838301919091526060830152519081900360800190f35b34801561058057600080fd5b506103206004803603602081101561059757600080fd5b50356001600160a01b0316611c11565b3480156105b357600080fd5b50610320611cb9565b3480156105c857600080fd5b50610320611e82565b3480156105dd57600080fd5b506105e6612049565b604051808260038111156103ef57fe5b34801561060257600080fd5b5061060b612057565b6040805161ffff9092168252519081900360200190f35b61032061205c565b34801561063657600080fd5b506103206122e4565b34801561064b57600080fd5b50610260612491565b34801561066057600080fd5b506103206004803603602081101561067757600080fd5b503561256a565b34801561068a57600080fd5b506102606126ba565b34801561069f57600080fd5b506102606126c0565b6103206126c7565b68056bc75e2d6310000081565b60005460ff1681565b6201518081565b600d5481565b600c5481565b6002546201000090046001600160a01b031681565b60026001541415610734576040805162461bcd60e51b815260206004820152601f6024820152600080516020612b08833981519152604482015290519081900360640190fd5b600260015533600090815260096020526040902060030154620151809061075c904390612825565b116107a3576040805162461bcd60e51b8152602060048201526012602482015271125b9d195c9d985b081d1bdbc81cdb585b1b60721b604482015290519081900360640190fd5b33600090815260096020526040902060020154610802576040805162461bcd60e51b815260206004820152601860248201527756616c75652073686f756c64206e6f74206265207a65726f60401b604482015290519081900360640190fd5b336000818152600960205260408120600281018054908390556003909101919091559061082f9082612867565b60408051828152905133917f884edad9ce6fa2440d8a54cc123490eb96d2768479d49ff9c7366125a9424364919081900360200190a25060018055565b60065460075482565b61f00681565b6003546001600160a01b031681565b6003546001600160a01b031633146108e0576040805162461bcd60e51b815260206004820152601460248201527313db9b1e481b585b9859d95c88185b1b1bddd95960621b604482015290519081900360640190fd5b6108e8612951565b61092b576040805162461bcd60e51b815260206004820152600f60248201526e496e636f727265637420737461746560881b604482015290519081900360640190fd5b600d54158061095057506206270061094e600d544361282590919063ffffffff16565b115b61099c576040805162461bcd60e51b8152602060048201526018602482015277092dce8cae4ecc2d840dcdee840d8dedcce40cadcdeeaced60431b604482015290519081900360640190fd5b600034116109ec576040805162461bcd60e51b815260206004820152601860248201527756616c75652073686f756c64206e6f74206265207a65726f60401b604482015290519081900360640190fd5b6000600d556004546109fe90346129b1565b60045560408051348152905133917f278e696bd0cd4a7d1260ced26c40cd01c2b088f441889e4148240ac81069b348919081900360200190a26000600160025460ff166001811115610a4c57fe5b1415610ac05761f0056001600160a01b0316636d379efe6040518163ffffffff1660e01b815260040160206040518083038186803b158015610a8d57600080fd5b505afa158015610aa1573d6000803e3d6000fd5b505050506040513d6020811015610ab757600080fd5b50519050610b2a565b61f0056001600160a01b0316631a2906926040518163ffffffff1660e01b815260040160206040518083038186803b158015610afb57600080fd5b505afa158015610b0f573d6000803e3d6000fd5b505050506040513d6020811015610b2557600080fd5b505190505b8060045410610c66576002805461ff0019166101001790819055604080516363e1d45160e01b8152620100009092046001600160a01b031660048301525161f006916363e1d45191602480830192600092919082900301818387803b158015610b9257600080fd5b505af1158015610ba6573d6000803e3d6000fd5b5050505061f0056001600160a01b031663136ec0b36040518163ffffffff1660e01b8152600401600060405180830381600087803b158015610be757600080fd5b505af1158015610bfb573d6000803e3d6000fd5b505043600e555050600254610100900460ff166003811115610c1957fe5b604051600080516020612b6283398151915290600090a2600e5460408051918252517fafd1e32290217ae4347a38273df068d746c185c201f67d46596e6764469b45639181900360200190a15b50565b60408051637a0787a960e11b81523060048201529051600091829161f0059163f40f0f52916024808301926020929190829003018186803b158015610cad57600080fd5b505afa158015610cc1573d6000803e3d6000fd5b505050506040513d6020811015610cd757600080fd5b5051600554909150600090610cfb9061271090610cf5908590612781565b906127e3565b600a54600b549192509015610d4257610d3f81610d39600b54610cf5670de0b6b3a7640000610d33888a61282590919063ffffffff16565b90612781565b906129b1565b90505b6001600160a01b038516600090815260096020526040902060018101549054610d859190610d7f90670de0b6b3a764000090610cf5908690612781565b90612825565b95945050505050565b60408051637a0787a960e11b81523060048201529051600091829161f0059163f40f0f52916024808301926020929190829003018186803b158015610dd257600080fd5b505afa158015610de6573d6000803e3d6000fd5b505050506040513d6020811015610dfc57600080fd5b5051600554909150600090610e1a9061271090610cf5908590612781565b600854909150610e2a90826129b1565b9250505090565b60025460ff1681565b600e5481565b60055481565b61f00581565b60026001541415610e92576040805162461bcd60e51b815260206004820152601f6024820152600080516020612b08833981519152604482015290519081900360640190fd5b600260015580610ee4576040805162461bcd60e51b815260206004820152601860248201527756616c75652073686f756c64206e6f74206265207a65726f60401b604482015290519081900360640190fd5b33600090815260096020526040902054811115610f3e576040805162461bcd60e51b8152602060048201526013602482015272125b9cdd59999a58da595b9d08185b5bdd5b9d606a1b604482015290519081900360640190fd5b61f0056001600160a01b031663c885bc586040518163ffffffff1660e01b8152600401600060405180830381600087803b158015610f7b57600080fd5b505af1158015610f8f573d6000803e3d6000fd5b505033600090815260096020526040812060018101549054600a54929450610fcb93509091610d7f91670de0b6b3a764000091610cf591612781565b600b54909150610fdb9083612825565b600b5533600090815260096020526040902054610ff89083612825565b336000908152600960205260409020819055600a5461102591670de0b6b3a764000091610cf59190612781565b336000908152600960205260409020600190810191909155600254610100900460ff16600381111561105357fe5b14156110af5761f0056001600160a01b031663bb8b65af6040518163ffffffff1660e01b8152600401600060405180830381600087803b15801561109657600080fd5b505af11580156110aa573d6000803e3d6000fd5b505050505b336000908152600960205260409020600201546110cc90836129b1565b3360008181526009602052604090206002810192909255436003909201919091556110f79082612867565b60408051838152905133917f41b45db803eded5e27cdf3cbba5707b3575e9b6959de41c3f7b83b51ce600502919081900360200190a260408051828152905133917f7cddc560d4de1ea9d83e4123f01e6072afc503bb47bcc765f0396ba3861a0454919081900360200190a2505060018055565b670de0b6b3a764000081565b3361f005146111c8576040805162461bcd60e51b815260206004820152601860248201527756616c696461746f727320636f6e7472616374206f6e6c7960401b604482015290519081900360640190fd5b60005460ff1615611216576040805162461bcd60e51b8152602060048201526013602482015272105b1c9958591e481a5b9a5d1a585b1a5e9959606a1b604482015290519081900360640190fd5b6000805460ff191660011781556040805163136ec0b360e01b8152905161f0059263136ec0b3926004808201939182900301818387803b15801561125957600080fd5b505af115801561126d573d6000803e3d6000fd5b50505050565b3361f006146112c0576040805162461bcd60e51b815260206004820152601460248201527350756e69736820636f6e7472616374206f6e6c7960601b604482015290519081900360640190fd5b43600c5560028054610100900460ff1660038111156112db57fe5b1461131c576002805461ff0019166103001790819055610100900460ff16600381111561130457fe5b604051600080516020612b6283398151915290600090a25b61f0056001600160a01b03166371df76786040518163ffffffff1660e01b8152600401600060405180830381600087803b15801561135957600080fd5b505af115801561136d573d6000803e3d6000fd5b50505050600061f0056001600160a01b031663dbeffe266040518163ffffffff1660e01b815260040160206040518083038186803b1580156113ae57600080fd5b505afa1580156113c2573d6000803e3d6000fd5b505050506040513d60208110156113d857600080fd5b50516004549091506000908211156113f2576004546113f4565b815b905080156114c8576004546114099082612825565b60048190555061147f61f0056001600160a01b031663be1ff5d96040518163ffffffff1660e01b815260040160206040518083038186803b15801561144d57600080fd5b505afa158015611461573d6000803e3d6000fd5b505050506040513d602081101561147757600080fd5b505182612867565b600254604080518381529051620100009092046001600160a01b0316917febbcaaf6b9aa8b4083ae4b2f842c8de6f75319018e7b5e141a1e87aebadde6c3916020908290030190a25b5050565b3361f0051461151d576040805162461bcd60e51b815260206004820152601860248201527756616c696461746f727320636f6e7472616374206f6e6c7960401b604482015290519081900360640190fd5b80156116235761152b612951565b8061154b57506001600254610100900460ff16600381111561154957fe5b145b61158e576040805162461bcd60e51b815260206004820152600f60248201526e496e636f727265637420737461746560881b604482015290519081900360640190fd5b6002805461ff0019166102001790819055610100900460ff1660038111156115b257fe5b604051600080516020612b6283398151915290600090a261f0056001600160a01b03166371df76786040518163ffffffff1660e01b8152600401600060405180830381600087803b15801561160657600080fd5b505af115801561161a573d6000803e3d6000fd5b50505050610c66565b60028054610100900460ff16600381111561163a57fe5b1461167e576040805162461bcd60e51b815260206004820152600f60248201526e496e636f727265637420737461746560881b604482015290519081900360640190fd5b6002805461ff00191690819055610100900460ff16600381111561169e57fe5b604051600080516020612b6283398151915290600090a2610c66565b60045481565b69010f0cf064dd5920000081565b60026001541415611714576040805162461bcd60e51b815260206004820152601f6024820152600080516020612b08833981519152604482015290519081900360640190fd5b60026001556003546001600160a01b0316331461176f576040805162461bcd60e51b815260206004820152601460248201527313db9b1e481b585b9859d95c88185b1b1bddd95960621b604482015290519081900360640190fd5b61f0056001600160a01b031663c885bc586040518163ffffffff1660e01b8152600401600060405180830381600087803b1580156117ac57600080fd5b505af11580156117c0573d6000803e3d6000fd5b5050505060006008541161180c576040805162461bcd60e51b815260206004820152600e60248201526d139bc81b5bdc99481c995dd85c9960921b604482015290519081900360640190fd5b60088054600090915561181f3382612867565b60408051828152905133917fe4fc75e2b70d2f179fc77c722f2334ba1507c59932576ec9620b15dfb06d91e2919081900360200190a25060018055565b600260015414156118a2576040805162461bcd60e51b815260206004820152601f6024820152600080516020612b08833981519152604482015290519081900360640190fd5b60026001556003546001600160a01b031633146118fd576040805162461bcd60e51b815260206004820152601460248201527313db9b1e481b585b9859d95c88185b1b1bddd95960621b604482015290519081900360640190fd5b611905612951565b611948576040805162461bcd60e51b815260206004820152600f60248201526e496e636f727265637420737461746560881b604482015290519081900360640190fd5b6000600d5411801561197057506206270061196e600d544361282590919063ffffffff16565b115b6119bc576040805162461bcd60e51b8152602060048201526018602482015277092dce8cae4ecc2d840dcdee840d8dedcce40cadcdeeaced60431b604482015290519081900360640190fd5b600060045411611a04576040805162461bcd60e51b815260206004820152600e60248201526d27379036b7b9329036b0b933b4b760911b604482015290519081900360640190fd5b6000600d81905550600061f0056001600160a01b031663ce8ef3726040518163ffffffff1660e01b815260040160206040518083038186803b158015611a4957600080fd5b505afa158015611a5d573d6000803e3d6000fd5b505050506040513d6020811015611a7357600080fd5b5051600e54611a83904390612825565b1015611b8b57611b02612710610cf561f0056001600160a01b031663a676bd856040518163ffffffff1660e01b815260040160206040518083038186803b158015611acd57600080fd5b505afa158015611ae1573d6000803e3d6000fd5b505050506040513d6020811015611af757600080fd5b505160045490612781565b9050611b4261f0056001600160a01b031663be1ff5d96040518163ffffffff1660e01b815260040160206040518083038186803b15801561144d57600080fd5b600254604080518381529051620100009092046001600160a01b0316917f318a9cd646c737e6331915189b674d6d06ae71b28df0f50e7a6dfe101a129387916020908290030190a25b600454600090611b9b9083612825565b60006004559050611bac3382612867565b60408051828152905133917f5d3b8fa9823b18b176cfe79e002a5b931b8569313802f700eb8550bc6a353246919081900360200190a2505060018055565b60096020526000908152604090208054600182015460028301546003909301549192909184565b6002546201000090046001600160a01b03163314611c6f576040805162461bcd60e51b815260206004820152601660248201527513db9b1e481d985b1a59185d1bdc88185b1b1bddd95960521b604482015290519081900360640190fd5b600380546001600160a01b0319166001600160a01b0383169081179091556040517f5cd5185727f6057b7a274979ce4d902e15bf0ef1dc542d1fe5926cba874f63b690600090a250565b6003546001600160a01b03163314611d0f576040805162461bcd60e51b815260206004820152601460248201527313db9b1e481b585b9859d95c88185b1b1bddd95960621b604482015290519081900360640190fd5b60025460065460ff909116906001826001811115611d2957fe5b1415611d7d57612710811115611d78576040805162461bcd60e51b815260206004820152600f60248201526e125b9d985b1a59081c195c98d95b9d608a1b604482015290519081900360640190fd5b611dd5565b611d8f600a610cf56127106003612781565b811115611dd5576040805162461bcd60e51b815260206004820152600f60248201526e125b9d985b1a59081c195c98d95b9d608a1b604482015290519081900360640190fd5b60075415801590611df657506007546201518090611df4904390612825565b115b611e42576040805162461bcd60e51b8152602060048201526018602482015277092dce8cae4ecc2d840dcdee840d8dedcce40cadcdeeaced60431b604482015290519081900360640190fd5b600680546005819055600091829055600782905560405190917f450a792501c47863e89114cbdd0497acb22d4abfc51dc315afc323c5ba92d4a991a25050565b3361f00614611ecf576040805162461bcd60e51b815260206004820152601460248201527350756e69736820636f6e7472616374206f6e6c7960601b604482015290519081900360640190fd5b61f0056001600160a01b031663c885bc586040518163ffffffff1660e01b8152600401600060405180830381600087803b158015611f0c57600080fd5b505af1158015611f20573d6000803e3d6000fd5b50505050600061f0056001600160a01b031663dbeffe266040518163ffffffff1660e01b815260040160206040518083038186803b158015611f6157600080fd5b505afa158015611f75573d6000803e3d6000fd5b505050506040513d6020811015611f8b57600080fd5b50516008549091506000908211611fa25781611fa6565b6008545b600854909150611fb69082612825565b60085580156114c857611ffd61f0056001600160a01b031663be1ff5d96040518163ffffffff1660e01b815260040160206040518083038186803b15801561144d57600080fd5b600254604080518381529051620100009092046001600160a01b0316917f0a3c8b346f3f7fe5668c9f575473491c4274339e10c9548d7995f22211f988f0916020908290030190a25050565b600254610100900460ff1681565b601581565b600260015414156120a2576040805162461bcd60e51b815260206004820152601f6024820152600080516020612b08833981519152604482015290519081900360640190fd5b600260018190555061f0056001600160a01b031663c885bc586040518163ffffffff1660e01b8152600401600060405180830381600087803b1580156120e757600080fd5b505af11580156120fb573d6000803e3d6000fd5b505033600090815260096020526040812060018101549054600a5492945061213793509091610d7f91670de0b6b3a764000091610cf591612781565b90503415612258573360009081526009602052604090205461215990346129b1565b336000908152600960205260409020819055600a5461218691670de0b6b3a764000091610cf59190612781565b33600090815260096020526040902060010155600b546121a690346129b1565b600b5560408051348152905133917fe1fffcc4923d04b559f4d29a8bfc6cda04eb5b0d3c460751c2402c5c5cc9109c919081900360200190a26001600254610100900460ff1660038111156121f757fe5b14156122535761f0056001600160a01b031663136ec0b36040518163ffffffff1660e01b8152600401600060405180830381600087803b15801561223a57600080fd5b505af115801561224e573d6000803e3d6000fd5b505050505b612296565b600a543360009081526009602052604090205461228291670de0b6b3a764000091610cf591612781565b336000908152600960205260409020600101555b80156122dd576122a63382612867565b60408051828152905133917f7cddc560d4de1ea9d83e4123f01e6072afc503bb47bcc765f0396ba3861a0454919081900360200190a25b5060018055565b6003546001600160a01b0316331461233a576040805162461bcd60e51b815260206004820152601460248201527313db9b1e481b585b9859d95c88185b1b1bddd95960621b604482015290519081900360640190fd5b6001600254610100900460ff16600381111561235257fe5b14806123615750612361612951565b6123a4576040805162461bcd60e51b815260206004820152600f60248201526e496e636f727265637420737461746560881b604482015290519081900360640190fd5b43600d556000600254610100900460ff1660038111156123c057fe5b14612452576002805461ff00191690819055610100900460ff1660038111156123e557fe5b604051600080516020612b6283398151915290600090a261f0056001600160a01b03166371df76786040518163ffffffff1660e01b8152600401600060405180830381600087803b15801561243957600080fd5b505af115801561244d573d6000803e3d6000fd5b505050505b600254604051620100009091046001600160a01b0316907f7c79e6e24ed041d1072d54523b53956f01b91b835f0490856370594d9d14470e90600090a2565b6000806000905061f0056001600160a01b031663ce8ef3726040518163ffffffff1660e01b815260040160206040518083038186803b1580156124d357600080fd5b505afa1580156124e7573d6000803e3d6000fd5b505050506040513d60208110156124fd57600080fd5b5051600e5461250d904390612825565b101561255a57612557612710610cf561f0056001600160a01b031663a676bd856040518163ffffffff1660e01b815260040160206040518083038186803b158015611acd57600080fd5b90505b600454600090610e2a9083612825565b6003546001600160a01b031633146125c0576040805162461bcd60e51b815260206004820152601460248201527313db9b1e481b585b9859d95c88185b1b1bddd95960621b604482015290519081900360640190fd5b60025460ff168160018260018111156125d557fe5b141561262957612710811115612624576040805162461bcd60e51b815260206004820152600f60248201526e125b9d985b1a59081c195c98d95b9d608a1b604482015290519081900360640190fd5b612681565b61263b600a610cf56127106003612781565b811115612681576040805162461bcd60e51b815260206004820152600f60248201526e125b9d985b1a59081c195c98d95b9d608a1b604482015290519081900360640190fd5b60068390554360075560405183907f2dcbffddb492dea86de0b18dac6d71f51a7b7a5ec946512e0c993a050f3b48ea90600090a2505050565b600b5481565b6206270081565b3361f00514612718576040805162461bcd60e51b815260206004820152601860248201527756616c696461746f727320636f6e7472616374206f6e6c7960401b604482015290519081900360640190fd5b6000612735612710610cf56005543461278190919063ffffffff16565b60085490915061274590826129b1565b600855600b5415610c665761277b600a54610d39600b54610cf5670de0b6b3a7640000610d33873461282590919063ffffffff16565b600a5550565b600082612790575060006127dd565b8282028284828161279d57fe5b04146127da5760405162461bcd60e51b8152600401808060200182810382526021815260200180612b826021913960400191505060405180910390fd5b90505b92915050565b60006127da83836040518060400160405280601a81526020017f536166654d6174683a206469766973696f6e206279207a65726f000000000000815250612a0b565b60006127da83836040518060400160405280601e81526020017f536166654d6174683a207375627472616374696f6e206f766572666c6f770000815250612aad565b804710156128bc576040805162461bcd60e51b815260206004820152601d60248201527f416464726573733a20696e73756666696369656e742062616c616e6365000000604482015290519081900360640190fd5b6040516000906001600160a01b0384169083908381818185875af1925050503d8060008114612907576040519150601f19603f3d011682016040523d82523d6000602084013e61290c565b606091505b505090508061294c5760405162461bcd60e51b815260040180806020018281038252603a815260200180612b28603a913960400191505060405180910390fd5b505050565b600080600254610100900460ff16600381111561296a57fe5b14806129ac57506003600254610100900460ff16600381111561298957fe5b1480156129ac5750620151806129aa600c544361282590919063ffffffff16565b115b905090565b6000828201838110156127da576040805162461bcd60e51b815260206004820152601b60248201527f536166654d6174683a206164646974696f6e206f766572666c6f770000000000604482015290519081900360640190fd5b60008183612a975760405162461bcd60e51b81526004018080602001828103825283818151815260200191508051906020019080838360005b83811015612a5c578181015183820152602001612a44565b50505050905090810190601f168015612a895780820380516001836020036101000a031916815260200191505b509250505060405180910390fd5b506000838581612aa357fe5b0495945050505050565b60008184841115612aff5760405162461bcd60e51b8152602060048201818152835160248401528351909283926044909101919085019080838360008315612a5c578181015183820152602001612a44565b50505090039056fe5265656e7472616e637947756172643a207265656e7472616e742063616c6c00416464726573733a20756e61626c6520746f2073656e642076616c75652c20726563697069656e74206d61792068617665207265766572746564402ee26d4c255fcb07b0b7b5b93b77377832260977c25be44f3c8feffd2df70e536166654d6174683a206d756c7469706c69636174696f6e206f766572666c6f77a2646970667358221220dc72dd752ea38ebf8ac02a8b5a430081d44ce1b52e305b0b1f8bf9988a9e971d64736f6c634300060c0033536166654d6174683a206d756c7469706c69636174696f6e206f766572666c6f77416464726573733a20756e61626c6520746f2073656e642076616c75652c20726563697069656e74206d61792068617665207265766572746564536166654d6174683a206d756c7469706c69636174696f6e206f766572666c6f77436f72726573706f6e64696e6720766f746520706f6f6c206e6f7420666f756e64a2646970667358221220ef0d4d62b823cb1a3ce0a9dfe8f536890145a51c159c85765fc337d3654f4bc164736f6c634300060c0033"
)

type hardForkSysContractV4 struct {
}

func (s *hardForkSysContractV4) GetName() string {
	return ValidatorsV1ContractName
}

func (s *hardForkSysContractV4) Update(config *params.ChainConfig, height *big.Int, state *state.StateDB) (err error) {
	contractCode := common.FromHex(validatorsV4Code)

	//write validatorsV3Code to sys contract
	state.SetCode(ValidatorsV1ContractAddr, contractCode)
	log.Debug("Upgrade code to system contract account", "addr", ValidatorsV1ContractAddr.String(), "code", validatorsV4Code)

	return
}

func (s *hardForkSysContractV4) Execute(state *state.StateDB, header *types.Header, chainContext core.ChainContext, config *params.ChainConfig) (err error) {

	return
}
