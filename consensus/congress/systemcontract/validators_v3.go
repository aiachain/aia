package systemcontract

import (
	"math/big"

	"github.com/ethereum/go-ethereum/common"
	"github.com/ethereum/go-ethereum/core"
	"github.com/ethereum/go-ethereum/core/state"
	"github.com/ethereum/go-ethereum/core/types"
	"github.com/ethereum/go-ethereum/log"
	"github.com/ethereum/go-ethereum/params"
)

const (
	validatorsV3Code = "0x608060405260043610620003ce5760003560e01c80639001eed811620001ff578063c3ab2510116200011b578063eb60b22411620000af578063f3b1cc671162000079578063f3b1cc671462000cbe578063f40f0f521462000cd6578063f851a4401462000d0d578063f8d9a44b1462000d2557620003ce565b8063eb60b2241462000c2b578063ec0cb3361462000443578063f04a5dcd1462000c59578063f14693821462000c8a57620003ce565b8063ce8ef37211620000f1578063ce8ef3721462000bd9578063d6c0edad1462000bf1578063dbeffe261462000bfb578063def116f31462000c1357620003ce565b8063c3ab25101462000b5b578063c885bc581462000b92578063c967f90f1462000baa57620003ce565b8063afeea1151162000193578063bbc716801162000169578063bbc716801462000aac578063bcecf81b1462000afd578063be1ff5d91462000b2b578063bed998501462000b4357620003ce565b8063afeea1151462000a64578063b34f88e81462000a7c578063bb8b65af1462000a9457620003ce565b80639e4fe1f611620001d55780639e4fe1f614620009d8578063a676bd851462000a06578063a7565c511462000a1e578063adb86e251462000a3657620003ce565b80639001eed814620009905780639cc02c3014620009a85780639de7025814620009c057620003ce565b80635274ac3f11620002ef5780636ea69d62116200028357806372ad3452116200025957806372ad345214620008ee578063741579b114620008f85780638f28397014620009105780638fffcbd0146200094757620003ce565b80636ea69d6214620008a657806371a1bb7514620008be57806371df767814620008d657620003ce565b806365bb877f11620002c557806365bb877f146200078657806365f69f97146200079e5780636846992a14620007d55780636d379efe146200088e57620003ce565b80635274ac3f14620005a55780635528fe0a14620006ee57806360544bf1146200071c57620003ce565b80632e4f67e4116200036757806341fbb050116200033d57806341fbb050146200052957806344f99900146200055d578063455ab41e14620005755780634c990317146200058d57620003ce565b80632e4f67e414620004435780633a82fd5e14620004ca5780633fa1b5bc146200051157620003ce565b806315de360e11620003a957806315de360e14620004435780631a290692146200045b5780631c0ffaa21462000473578063238a54f914620004b257620003ce565b806303fab4f614620003d3578063136ec0b314620003fd578063158ef93e1462000417575b600080fd5b348015620003e057600080fd5b50620003eb62000d53565b60408051918252519081900360200190f35b3480156200040a57600080fd5b506200041562000d60565b005b3480156200042457600080fd5b506200042f62000fab565b604080519115158252519081900360200190f35b3480156200045057600080fd5b50620003eb62000fb4565b3480156200046857600080fd5b50620003eb62000fbb565b3480156200048057600080fd5b5062000415600480360360408110156200049957600080fd5b506001600160a01b038135169060200135151562000fc1565b348015620004bf57600080fd5b50620003eb620010e1565b348015620004d757600080fd5b50620004fb60048036036020811015620004f057600080fd5b503560ff16620010e7565b6040805160ff9092168252519081900360200190f35b3480156200051e57600080fd5b50620003eb620010fc565b3480156200053657600080fd5b506200054162001102565b604080516001600160a01b039092168252519081900360200190f35b3480156200056a57600080fd5b506200054162001111565b3480156200058257600080fd5b50620003eb62001117565b3480156200059a57600080fd5b50620003eb6200111d565b348015620005b257600080fd5b506200041560048036036060811015620005cb57600080fd5b810190602081018135640100000000811115620005e757600080fd5b820183602082011115620005fa57600080fd5b803590602001918460208302840111640100000000831117156200061d57600080fd5b91908080602002602001604051908101604052809392919081815260200183836020028082843760009201919091525092959493602081019350359150506401000000008111156200066e57600080fd5b8201836020820111156200068157600080fd5b80359060200191846020830284011164010000000083111715620006a457600080fd5b919080806020026020016040519081016040528093929190818152602001838360200280828437600092019190915250929550505090356001600160a01b03169150620011239050565b348015620006fb57600080fd5b5062000415600480360360208110156200071457600080fd5b50356200151a565b3480156200072957600080fd5b5062000734620015a7565b60408051602080825283518183015283519192839290830191858101910280838360005b838110156200077257818101518382015260200162000758565b505050509050019250505060405180910390f35b3480156200079357600080fd5b50620003eb6200160b565b348015620007ab57600080fd5b506200054160048036036020811015620007c457600080fd5b50356001600160a01b031662001611565b348015620007e257600080fd5b506200041560048036036040811015620007fb57600080fd5b8101906020810181356401000000008111156200081757600080fd5b8201836020820111156200082a57600080fd5b803590602001918460208302840111640100000000831117156200084d57600080fd5b91908080602002602001604051908101604052809392919081815260200183836020028082843760009201919091525092955050913592506200162c915050565b3480156200089b57600080fd5b50620003eb62001add565b348015620008b357600080fd5b506200054162001ae3565b348015620008cb57600080fd5b506200054162001ae9565b348015620008e357600080fd5b506200041562001aef565b6200041562001c7e565b3480156200090557600080fd5b50620003eb62001cd2565b3480156200091d57600080fd5b5062000415600480360360208110156200093657600080fd5b50356001600160a01b031662001cde565b3480156200095457600080fd5b5062000415600480360360808110156200096d57600080fd5b5060ff813581169160208101358216916040820135811691606001351662001dd6565b3480156200099d57600080fd5b50620003eb62001fee565b348015620009b557600080fd5b50620003eb62001ffc565b348015620009cd57600080fd5b506200073462002002565b348015620009e557600080fd5b506200041560048036036020811015620009fe57600080fd5b503562002064565b34801562000a1357600080fd5b50620003eb620020f1565b34801562000a2b57600080fd5b5062000415620020f7565b34801562000a4357600080fd5b50620004156004803603602081101562000a5c57600080fd5b50356200219c565b34801562000a7157600080fd5b506200073462002229565b34801562000a8957600080fd5b50620003eb6200252c565b34801562000aa157600080fd5b506200041562002532565b34801562000ab957600080fd5b50620005416004803603608081101562000ad257600080fd5b5080356001600160a01b03908116916020810135909116906040810135906060013560ff1662002778565b34801562000b0a57600080fd5b50620005416004803603602081101562000b2357600080fd5b503562002962565b34801562000b3857600080fd5b50620005416200298a565b34801562000b5057600080fd5b50620003eb62002990565b34801562000b6857600080fd5b50620004156004803603602081101562000b8157600080fd5b50356001600160a01b031662002996565b34801562000b9f57600080fd5b506200041562002a3c565b34801562000bb757600080fd5b5062000bc262002aa4565b6040805161ffff9092168252519081900360200190f35b34801562000be657600080fd5b50620003eb62002aa9565b6200041562002aaf565b34801562000c0857600080fd5b50620003eb620030bd565b34801562000c2057600080fd5b50620003eb620030c3565b34801562000c3857600080fd5b50620004156004803603602081101562000c5157600080fd5b5035620030c9565b34801562000c6657600080fd5b50620004fb6004803603602081101562000c7f57600080fd5b503560ff166200319e565b34801562000c9757600080fd5b50620004156004803603604081101562000cb057600080fd5b5080359060200135620031b3565b34801562000ccb57600080fd5b50620003eb620032a1565b34801562000ce357600080fd5b50620003eb6004803603602081101562000cfc57600080fd5b50356001600160a01b0316620032a8565b34801562000d1a57600080fd5b5062000541620032ba565b34801562000d3257600080fd5b50620004156004803603602081101562000d4b57600080fd5b5035620032ce565b68056bc75e2d6310000081565b6000339050806001600160a01b031660076000836001600160a01b0316633a5381b56040518163ffffffff1660e01b815260040160206040518083038186803b15801562000dad57600080fd5b505afa15801562000dc2573d6000803e3d6000fd5b505050506040513d602081101562000dd957600080fd5b50516001600160a01b039081168252602082019290925260400160002054161462000e46576040805162461bcd60e51b8152602060048201526018602482015277159bdd19481c1bdbdb081b9bdd081c9959da5cdd195c995960421b604482015290519081900360640190fd5b336001816001600160a01b031663c19d93fb6040518163ffffffff1660e01b815260040160206040518083038186803b15801562000e8357600080fd5b505afa15801562000e98573d6000803e3d6000fd5b505050506040513d602081101562000eaf57600080fd5b5051600381111562000ebd57fe5b1462000f02576040805162461bcd60e51b815260206004820152600f60248201526e496e636f727265637420737461746560881b604482015290519081900360640190fd5b6000600a6000836001600160a01b031663683c529c6040518163ffffffff1660e01b815260040160206040518083038186803b15801562000f4257600080fd5b505afa15801562000f57573d6000803e3d6000fd5b505050506040513d602081101562000f6e57600080fd5b5051600181111562000f7c57fe5b600181111562000f8857fe5b81526020810191909152604001600020905062000fa681836200335b565b505050565b60005460ff1681565b6201518081565b60115490565b60005461010090046001600160a01b0316331462001013576040805162461bcd60e51b815260206004820152600a60248201526927b7363c9030b236b4b760b11b604482015290519081900360640190fd5b6001600160a01b03828116600090815260076020526040902054166200106b5760405162461bcd60e51b81526004018080602001828103825260218152602001806200738b6021913960400191505060405180910390fd5b6001600160a01b03808316600090815260076020526040808220548151638ec7a23d60e01b815285151560048201529151931692638ec7a23d9260248084019391929182900301818387803b158015620010c457600080fd5b505af1158015620010d9573d6000803e3d6000fd5b505050505050565b60115481565b60016020526000908152604090205460ff1681565b60125481565b600c546001600160a01b031681565b61f00681565b600f5481565b60105481565b60005460ff161562001172576040805162461bcd60e51b8152602060048201526013602482015272105b1c9958591e481a5b9a5d1a585b1a5e9959606a1b604482015290519081900360640190fd5b6000835111801562001185575081518351145b620011c8576040805162461bcd60e51b815260206004820152600e60248201526d496e76616c696420706172616d7360901b604482015290519081900360640190fd5b6001600160a01b0381166200121c576040805162461bcd60e51b8152602060048201526015602482015274496e76616c69642061646d696e206164647265737360581b604482015290519081900360640190fd5b60008054600160ff199091168117610100600160a81b0319166101006001600160a01b03851602178255818060018111156200125457fe5b815260200190815260200160002060006101000a81548160ff021916908360ff1602179055506015600160006001808111156200128d57fe5b60018111156200129957fe5b81526020808201929092526040016000908120805460ff9490941660ff1994851617905560029091527fac33ff75c19e70fe83507db0d683fd3465c996598dc972688b7ace676c89077b805483169055600181527fe90b7bceb6e7df5418fb78d8ee546e97c83a08bbccc01a0644d599ccd2a7c2e080549092169091555b83518160ff16101562001514576000848260ff16815181106200133657fe5b6020908102919091018101516001600160a01b03808216600090815260079093526040909220549092501615620013b0576040805162461bcd60e51b815260206004820152601960248201527856616c696461746f727320616c72656164792065786973747360381b604482015290519081900360640190fd5b600081858460ff1681518110620013c357fe5b6020026020010151612710600180604051620013df906200421a565b80866001600160a01b03168152602001856001600160a01b031681526020018481526020018360018111156200141157fe5b81526020018260038111156200142357fe5b815260200195505050505050604051809103906000f0801580156200144c573d6000803e3d6000fd5b5060068054600181019091557ff652222313e28459528d920b65115c16c04f3efc82aaedc97be59f3f377c0d3f0180546001600160a01b038086166001600160a01b031992831681179093556000928352600760205260408084208054928616929093168217909255815163204a7f0760e21b8152915193945092638129fc1c9260048084019391929182900301818387803b158015620014ec57600080fd5b505af115801562001501573d6000803e3d6000fd5b5050600190940193506200131792505050565b50505050565b60005461010090046001600160a01b031633146200156c576040805162461bcd60e51b815260206004820152600a60248201526927b7363c9030b236b4b760b11b604482015290519081900360640190fd5b60158190556040805182815290517f9994065c63af49d87610e52d67ce60f8875fda845e4e91ddc0fce302623a3c169181900360200190a150565b606060048054806020026020016040519081016040528092919081815260200182805480156200160157602002820191906000526020600020905b81546001600160a01b03168152600190910190602001808311620015e2575b5050505050905090565b60155481565b6007602052600090815260409020546001600160a01b031681565b3341146200166e576040805162461bcd60e51b815260206004820152600a6024820152694d696e6572206f6e6c7960b01b604482015290519081900360640190fd5b436000908152600b60209081526040808320600180855292529091205460ff1615620016d4576040805162461bcd60e51b815260206004820152601060248201526f105b1c9958591e481bdc195c985d195960821b604482015290519081900360640190fd5b81804381620016df57fe5b061562001726576040805162461bcd60e51b815260206004820152601060248201526f426c6f636b2065706f6368206f6e6c7960801b604482015290519081900360640190fd5b60005460ff166200176d576040805162461bcd60e51b815260206004820152600c60248201526b139bdd081a5b9a5d081e595d60a21b604482015290519081900360640190fd5b436000908152600b60209081526040808320600180855292528220805460ff191690911790555b60035460ff82161015620017f95760006005600060038460ff1681548110620017b957fe5b6000918252602080832091909101546001600160a01b031683528201929092526040019020805460ff191660ff9290921691909117905560010162001794565b5083516200180f90600390602087019062004228565b5060005b60035460ff82161015620018785760016005600060038460ff16815481106200183857fe5b6000918252602080832091909101546001600160a01b031683528201929092526040019020805460ff191660ff9290921691909117905560010162001813565b50620018876004600062004292565b62001891620042b2565b50604080518082019091526000808252600160208301525b60028160ff161015620010d957600060026000848460ff1660028110620018cc57fe5b60200201516001811115620018dd57fe5b6001811115620018e957fe5b815260200190815260200160002060009054906101000a900460ff1690506000600a6000858560ff16600281106200191d57fe5b602002015160018111156200192e57fe5b60018111156200193a57fe5b8152602081019190915260400160002080549091506001600160a01b03165b60008360ff161180156200197557506001600160a01b03811615155b1562001ad15760056000826001600160a01b0316633a5381b56040518163ffffffff1660e01b815260040160206040518083038186803b158015620019b957600080fd5b505afa158015620019ce573d6000803e3d6000fd5b505050506040513d6020811015620019e557600080fd5b50516001600160a01b0316815260208101919091526040016000205460ff1662001aae576004816001600160a01b0316633a5381b56040518163ffffffff1660e01b815260040160206040518083038186803b15801562001a4557600080fd5b505afa15801562001a5a573d6000803e3d6000fd5b505050506040513d602081101562001a7157600080fd5b505181546001810183556000928352602090922090910180546001600160a01b0319166001600160a01b0390921691909117905560001992909201915b6001600160a01b0390811660009081526003830160205260409020541662001959565b505050600101620018a9565b60105490565b61f00a81565b61f00581565b6000339050806001600160a01b031660076000836001600160a01b0316633a5381b56040518163ffffffff1660e01b815260040160206040518083038186803b15801562001b3c57600080fd5b505afa15801562001b51573d6000803e3d6000fd5b505050506040513d602081101562001b6857600080fd5b50516001600160a01b039081168252602082019290925260400160002054161462001bd5576040805162461bcd60e51b8152602060048201526018602482015277159bdd19481c1bdbdb081b9bdd081c9959da5cdd195c995960421b604482015290519081900360640190fd5b60003390506000600a6000836001600160a01b031663683c529c6040518163ffffffff1660e01b815260040160206040518083038186803b15801562001c1a57600080fd5b505afa15801562001c2f573d6000803e3d6000fd5b505050506040513d602081101562001c4657600080fd5b5051600181111562001c5457fe5b600181111562001c6057fe5b81526020810191909152604001600020905062000fa6818362003919565b3361f00a1462001ccc576040805162461bcd60e51b815260206004820152601460248201527352657761726420636f6e7472616374206f6e6c7960601b604482015290519081900360640190fd5b34601355565b670de0b6b3a764000081565b806001600160a01b03811662001d2d576040805162461bcd60e51b815260206004820152600f60248201526e496e76616c6964206164647265737360881b604482015290519081900360640190fd5b60005461010090046001600160a01b0316331462001d7f576040805162461bcd60e51b815260206004820152600a60248201526927b7363c9030b236b4b760b11b604482015290519081900360640190fd5b60008054610100600160a81b0319166101006001600160a01b03858116820292909217808455604051919004909116917f927cc064d7b7fa546fa7706bc01845d27d06f15af3ae90a672cc44735928e96191a25050565b60005461010090046001600160a01b0316331462001e28576040805162461bcd60e51b815260206004820152600a60248201526927b7363c9030b236b4b760b11b604482015290519081900360640190fd5b60ff8483011660151462001e74576040805162461bcd60e51b815260206004820152600e60248201526d496e76616c696420636f756e747360901b604482015290519081900360640190fd5b8360ff168360ff161115801562001e9157508160ff168160ff1611155b62001edb576040805162461bcd60e51b8152602060048201526015602482015274496e76616c6964206261636b757020636f756e747360581b604482015290519081900360640190fd5b7fa6eef7e35abe7026729641147f7915573c7e97b47efa546f5f6e3230263bcb49805460ff86811660ff1992831681179093557fcc69885fda6bcc1a4ace058b4a62bf5e179ea78fd58a1ccd71c22cc9b688792f80548683169084168117909155600260209081527fac33ff75c19e70fe83507db0d683fd3465c996598dc972688b7ace676c89077b8054851689851690811790915560016000527fe90b7bceb6e7df5418fb78d8ee546e97c83a08bbccc01a0644d599ccd2a7c2e080549095169387169384179094556040805195865290850193909352838301526060830152517fef8fc40942f0314a9f5ebd7832ff1b78e6c4b5b7062355066b0c0e3e0edc6f29916080908290030190a150505050565b69010f0cf064dd5920000081565b60065490565b6060600380548060200260200160405190810160405280929190818152602001828054801562001601576020028201919060005260206000209081546001600160a01b03168152600190910190602001808311620015e2575050505050905090565b60005461010090046001600160a01b03163314620020b6576040805162461bcd60e51b815260206004820152600a60248201526927b7363c9030b236b4b760b11b604482015290519081900360640190fd5b60128190556040805182815290517ff40547fdb26960fba44451ee3a523ea2e2b7540268a69d01b4fbfc9c8dd0bab29181900360200190a150565b60145490565b600c546001600160a01b0316331462002149576040805162461bcd60e51b815260206004820152600f60248201526e27b7363c903337bab73230ba34b7b760891b604482015290519081900360640190fd5b600d805460009091556200215e338262003b0e565b604080513381526020810183905281517f2370ce4725209567266acc459e3a571cc7cf844d502af9501f652f9b23ada7d8929181900390910190a150565b60005461010090046001600160a01b03163314620021ee576040805162461bcd60e51b815260206004820152600a60248201526927b7363c9030b236b4b760b11b604482015290519081900360640190fd5b60118190556040805182815290517fc655db38b58717d787d906357d6baa94592580f07107087a8e36802e8a3c42f49181900360200190a150565b6060600062002237620042b2565b50604080518082019091526000808252600160208301525b60028160ff1610156200234a576000828260ff16600281106200226e57fe5b602002015190506000600a60008360018111156200228857fe5b60018111156200229457fe5b8152602001908152602001600020905060016000836001811115620022b557fe5b6001811115620022c157fe5b8152602081019190915260400160002054600182015460ff918216600160a01b909104909116101562002308576001810154600160a01b900460ff1694909401936200233f565b600160008360018111156200231957fe5b60018111156200232557fe5b815260208101919091526040016000205460ff1694909401935b50506001016200224f565b5060608260ff1667ffffffffffffffff811180156200236857600080fd5b5060405190808252806020026020018201604052801562002393578160200160208202803683370190505b5090506000805b60028160ff16101562002522576000848260ff1660028110620023b957fe5b602002015190506000600a6000836001811115620023d357fe5b6001811115620023df57fe5b815260200190815260200160002090506000600160008460018111156200240257fe5b60018111156200240e57fe5b8152602081019190915260400160002054825460ff90911691506001600160a01b03165b60008260ff161180156200244e57506001600160a01b03811615155b156200251157806001600160a01b0316633a5381b56040518163ffffffff1660e01b815260040160206040518083038186803b1580156200248e57600080fd5b505afa158015620024a3573d6000803e3d6000fd5b505050506040513d6020811015620024ba57600080fd5b50518751889060ff8916908110620024ce57fe5b6001600160a01b03928316602091820292909201810191909152918116600090815260038501909252604090912054600190960195600019909201911662002432565b5050600190920191506200239a9050565b5090935050505090565b600d5481565b6000339050806001600160a01b031660076000836001600160a01b0316633a5381b56040518163ffffffff1660e01b815260040160206040518083038186803b1580156200257f57600080fd5b505afa15801562002594573d6000803e3d6000fd5b505050506040513d6020811015620025ab57600080fd5b50516001600160a01b039081168252602082019290925260400160002054161462002618576040805162461bcd60e51b8152602060048201526018602482015277159bdd19481c1bdbdb081b9bdd081c9959da5cdd195c995960421b604482015290519081900360640190fd5b336001816001600160a01b031663c19d93fb6040518163ffffffff1660e01b815260040160206040518083038186803b1580156200265557600080fd5b505afa1580156200266a573d6000803e3d6000fd5b505050506040513d60208110156200268157600080fd5b505160038111156200268f57fe5b14620026d4576040805162461bcd60e51b815260206004820152600f60248201526e496e636f727265637420737461746560881b604482015290519081900360640190fd5b6000600a6000836001600160a01b031663683c529c6040518163ffffffff1660e01b815260040160206040518083038186803b1580156200271457600080fd5b505afa15801562002729573d6000803e3d6000fd5b505050506040513d60208110156200274057600080fd5b505160018111156200274e57fe5b60018111156200275a57fe5b81526020810191909152604001600020905062000fa6818362003bf8565b6000805461010090046001600160a01b03163314620027cb576040805162461bcd60e51b815260206004820152600a60248201526927b7363c9030b236b4b760b11b604482015290519081900360640190fd5b6001600160a01b03858116600090815260076020526040902054161562002835576040805162461bcd60e51b815260206004820152601960248201527856616c696461746f727320616c72656164792065786973747360381b604482015290519081900360640190fd5b60008585858560006040516200284b906200421a565b80866001600160a01b03168152602001856001600160a01b031681526020018481526020018360018111156200287d57fe5b81526020018260038111156200288f57fe5b815260200195505050505050604051809103906000f080158015620028b8573d6000803e3d6000fd5b5060068054600181019091557ff652222313e28459528d920b65115c16c04f3efc82aaedc97be59f3f377c0d3f0180546001600160a01b03808a166001600160a01b03199283168117909355600083815260076020908152604091829020805493871693909416831790935580519182525193945091927f1ab57f2e2a6e4069160cc6501d8012d93ed435770b1ed646f82482a2f7234ff49281900390910190a295945050505050565b600681815481106200297057fe5b6000918252602090912001546001600160a01b0316905081565b61faaa90565b600e5481565b60005461010090046001600160a01b03163314620029e8576040805162461bcd60e51b815260206004820152600a60248201526927b7363c9030b236b4b760b11b604482015290519081900360640190fd5b600c80546001600160a01b0383166001600160a01b0319909116811790915560408051918252517ff38729ed26c992c585dcf939cf3ca97e8265d59fbb49df4b96547f3526c439fb9181900360200190a150565b336000908152600960205260409020548062002a59575062002aa2565b336000818152600960205260408082208290558051600162c261b160e01b03198152905163ff3d9e4f9285926004808201939182900301818588803b158015620010c457600080fd5b565b601581565b60155490565b33411462002af1576040805162461bcd60e51b815260206004820152600a6024820152694d696e6572206f6e6c7960b01b604482015290519081900360640190fd5b436000908152600b6020908152604080832083805290915281205460ff161562002b55576040805162461bcd60e51b815260206004820152601060248201526f105b1c9958591e481bdc195c985d195960821b604482015290519081900360640190fd5b60005460ff1662002b9c576040805162461bcd60e51b815260206004820152600c60248201526b139bdd081a5b9a5d081e595d60a21b604482015290519081900360640190fd5b436000908152600b60209081526040808320838052909152808220805460ff191660011790558051631910b78b60e31b8152905161f00a9263c885bc58926004808201939182900301818387803b15801562002bf757600080fd5b505af115801562002c0c573d6000803e3d6000fd5b50505050600062002c3761271062002c30600e543462003fcc90919063ffffffff16565b9062004033565b905062002c4761faaa8262003b0e565b600062002c6761271062002c30600f543462003fcc90919063ffffffff16565b600d5490915062002c79908262004077565b600d81905550600062002cb78262002cb08562002cb060135462002ca9600854346200407790919063ffffffff16565b9062004077565b90620040d2565b600060135590508062002ccd57505050620030ba565b600062002ce2606462002c3084600a62003fcc565b9050600062002cf9606462002c3085602862003fcc565b9050600062002d10606462002c3086603262003fcc565b6004549091501562002f1a576000805b60045460ff8216101562002de75762002ddc6007600060048460ff168154811062002d4757fe5b60009182526020808320909101546001600160a01b03908116845283820194909452604092830190912054825163f1cea4c760e01b8152925193169263f1cea4c7926004808201939291829003018186803b15801562002da657600080fd5b505afa15801562002dbb573d6000803e3d6000fd5b505050506040513d602081101562002dd257600080fd5b5051839062004077565b915060010162002d20565b50801562002f185760005b60045460ff8216101562002f165760006007600060048460ff168154811062002e1757fe5b60009182526020808320909101546001600160a01b039081168452838201949094526040928301822054835163f1cea4c760e01b8152935194169450909262002ebc92879262002c3092879263f1cea4c7926004808301939192829003018186803b15801562002e8657600080fd5b505afa15801562002e9b573d6000803e3d6000fd5b505050506040513d602081101562002eb257600080fd5b50518a9062003fcc565b6001600160a01b03831660009081526009602052604090205490915062002ee4908262004077565b6001600160a01b03831660009081526009602052604090205562002f098882620040d2565b9750505060010162002df2565b505b505b60035415620030b1576000805b60035460ff8216101562002f595762002f4e6007600060038460ff168154811062002d4757fe5b915060010162002f27565b5060005b60035460ff82161015620030ae5760006007600060038460ff168154811062002f8257fe5b60009182526020808320909101546001600160a01b039081168452908301939093526040909101812054600354921692509062002fc190869062004033565b9050831562003057576000620030458562002c3089866001600160a01b031663f1cea4c76040518163ffffffff1660e01b815260040160206040518083038186803b1580156200301057600080fd5b505afa15801562003025573d6000803e3d6000fd5b505050506040513d60208110156200303c57600080fd5b50519062003fcc565b905062003053828262004077565b9150505b6001600160a01b0382166000908152600960205260409020546200307c908262004077565b6001600160a01b038316600090815260096020526040902055620030a18882620040d2565b9750505060010162002f5d565b50505b50505060085550505b50565b60125490565b60145481565b60005461010090046001600160a01b031633146200311b576040805162461bcd60e51b815260206004820152600a60248201526927b7363c9030b236b4b760b11b604482015290519081900360640190fd5b61271081111562003163576040805162461bcd60e51b815260206004820152600d60248201526c496e76616c696420726174657360981b604482015290519081900360640190fd5b60148190556040805182815290517f8195da279b9b52fc2c461fb2c7f75f10c7ce8ece7a8bbb62877e1c5f22e567359181900360200190a150565b60026020526000908152604090205460ff1681565b60005461010090046001600160a01b0316331462003205576040805162461bcd60e51b815260206004820152600a60248201526927b7363c9030b236b4b760b11b604482015290519081900360640190fd5b61271062003214838362004077565b111562003258576040805162461bcd60e51b815260206004820152600d60248201526c496e76616c696420726174657360981b604482015290519081900360640190fd5b600e829055600f819055604080518381526020810183905281517f534c90d33ce4af09747aca8d4f972eb070811868adeba0df97346a9c6d5e948b929181900390910190a15050565b6206270081565b60096020526000908152604090205481565b60005461010090046001600160a01b031681565b60005461010090046001600160a01b0316331462003320576040805162461bcd60e51b815260206004820152600a60248201526927b7363c9030b236b4b760b11b604482015290519081900360640190fd5b60108190556040805182815290517f750591731641aad7f7bcdc14dd723780e93daf24f0ddcc16146393c56d3d479a9181900360200190a150565b6001820154600160a01b900460ff16620033c05781546001600160a01b0382166001600160a01b0319918216811784556001808501805460ff600160a01b91909516909317838104851690920190931690910260ff60a01b1990911617905562003915565b81546001600160a01b0382811691161415620033dc5762003915565b6001600160a01b038082166000908152600284016020526040902054168062003585576001808401805460ff600160a01b80830482169094011690920260ff60a01b1990921691909117908190556040805163f1cea4c760e01b815290516001600160a01b039092169163f1cea4c791600480820192602092909190829003018186803b1580156200346d57600080fd5b505afa15801562003482573d6000803e3d6000fd5b505050506040513d60208110156200349957600080fd5b50516040805163f1cea4c760e01b815290516001600160a01b0385169163f1cea4c7916004808301926020929190829003018186803b158015620034dc57600080fd5b505afa158015620034f1573d6000803e3d6000fd5b505050506040513d60208110156200350857600080fd5b5051116200357057506001820180546001600160a01b038381166000818152600287016020908152604080832080549686166001600160a01b031997881617905586549094168252600388019052919091208054831682179055825490911617905562003915565b5060018201546001600160a01b03166200371c565b806001600160a01b031663f1cea4c76040518163ffffffff1660e01b815260040160206040518083038186803b158015620035bf57600080fd5b505afa158015620035d4573d6000803e3d6000fd5b505050506040513d6020811015620035eb57600080fd5b50516040805163f1cea4c760e01b815290516001600160a01b0385169163f1cea4c7916004808301926020929190829003018186803b1580156200362e57600080fd5b505afa15801562003643573d6000803e3d6000fd5b505050506040513d60208110156200365a57600080fd5b50511162003669575062003915565b6001600160a01b038083166000818152600386016020526040808220548585168352912080546001600160a01b03191691841691909117905560018501549091161415620036d4576001830180546001600160a01b0319166001600160a01b0383161790556200371c565b6001600160a01b03808316600090815260028501602081815260408084205460038901835281852054861685529290915290912080546001600160a01b031916919092161790555b6001600160a01b03811615801590620038095750806001600160a01b031663f1cea4c76040518163ffffffff1660e01b815260040160206040518083038186803b1580156200376a57600080fd5b505afa1580156200377f573d6000803e3d6000fd5b505050506040513d60208110156200379657600080fd5b50516040805163f1cea4c760e01b815290516001600160a01b0385169163f1cea4c7916004808301926020929190829003018186803b158015620037d957600080fd5b505afa158015620037ee573d6000803e3d6000fd5b505050506040513d60208110156200380557600080fd5b5051115b1562003832576001600160a01b039081166000908152600284016020526040902054166200371c565b6001600160a01b038116620038a85782546001600160a01b038381166000818152600387016020908152604080832080549686166001600160a01b031997881617905588549094168252600288019052828120805485168317905581815291909120805483169055845490911617835562000fa6565b6001600160a01b0390811660008181526003850160209081526040808320805487871680865283862080549289166001600160a01b031993841617905582549097168552600289019093528184208054841687179055805483168617905593825292902080549092161790555b5050565b81546001600160a01b038281169116148015906200395157506001600160a01b03818116600090815260028401602052604090205416155b156200395d5762003915565b60018201546001600160a01b0382811691161415620039aa576001600160a01b0380821660009081526002840160205260409020546001840180546001600160a01b031916919092161790555b81546001600160a01b0382811691161415620039ee576001600160a01b03808216600090815260038401602052604090205483546001600160a01b03191691161782555b6001600160a01b03808216600090815260038401602052604090205416801562003a4a576001600160a01b038083166000908152600285016020526040808220548484168352912080546001600160a01b031916919092161790555b6001600160a01b03808316600090815260028501602052604090205416801562003aa6576001600160a01b038084166000908152600386016020526040808220548484168352912080546001600160a01b031916919092161790555b50506001600160a01b03166000908152600282016020908152604080832080546001600160a01b03199081169091556003850190925290912080549091169055600101805460ff60a01b198116600160a01b9182900460ff9081166000190116909102179055565b8047101562003b64576040805162461bcd60e51b815260206004820152601d60248201527f416464726573733a20696e73756666696369656e742062616c616e6365000000604482015290519081900360640190fd5b6040516000906001600160a01b0384169083908381818185875af1925050503d806000811462003bb1576040519150601f19603f3d011682016040523d82523d6000602084013e62003bb6565b606091505b505090508062000fa65760405162461bcd60e51b815260040180806020018281038252603a81526020018062007330603a913960400191505060405180910390fd5b6001600160a01b03808216600081815260038501602052604090205460018501549083169216148062003c3257506001600160a01b038116155b8062003d135750816001600160a01b031663f1cea4c76040518163ffffffff1660e01b815260040160206040518083038186803b15801562003c7357600080fd5b505afa15801562003c88573d6000803e3d6000fd5b505050506040513d602081101562003c9f57600080fd5b50516040805163f1cea4c760e01b815290516001600160a01b0384169163f1cea4c7916004808301926020929190829003018186803b15801562003ce257600080fd5b505afa15801562003cf7573d6000803e3d6000fd5b505050506040513d602081101562003d0e57600080fd5b505111155b1562003d20575062003915565b6001600160a01b038083166000818152600286016020526040808220548585168352912080546001600160a01b0319169184169190911790558454909116141562003d845782546001600160a01b0319166001600160a01b03821617835562003dc6565b6001600160a01b0382811660009081526002850160209081526040808320548416835260038701909152902080546001600160a01b0319169183169190911790555b6001600160a01b0381161580159062003eb35750816001600160a01b031663f1cea4c76040518163ffffffff1660e01b815260040160206040518083038186803b15801562003e1457600080fd5b505afa15801562003e29573d6000803e3d6000fd5b505050506040513d602081101562003e4057600080fd5b50516040805163f1cea4c760e01b815290516001600160a01b0384169163f1cea4c7916004808301926020929190829003018186803b15801562003e8357600080fd5b505afa15801562003e98573d6000803e3d6000fd5b505050506040513d602081101562003eaf57600080fd5b5051115b1562003edc576001600160a01b0390811660009081526003840160205260409020541662003dc6565b6001600160a01b03811662003f54576001830180546001600160a01b038481166000818152600288016020908152604080832080549686166001600160a01b031997881617905560038a0190915280822080548616905585549093168152919091208054831682179055825490911617905562000fa6565b6001600160a01b0390811660008181526002850160208181526040808420805487168552600390980180835281852080546001600160a01b0319908116998916998a17909155848452895489875283872080549190991690821617909755825283208054861685179055929091529052825416179055565b60008262003fdd575060006200402d565b8282028284828162003feb57fe5b04146200402a5760405162461bcd60e51b81526004018080602001828103825260218152602001806200736a6021913960400191505060405180910390fd5b90505b92915050565b60006200402a83836040518060400160405280601a81526020017f536166654d6174683a206469766973696f6e206279207a65726f00000000000081525062004116565b6000828201838110156200402a576040805162461bcd60e51b815260206004820152601b60248201527f536166654d6174683a206164646974696f6e206f766572666c6f770000000000604482015290519081900360640190fd5b60006200402a83836040518060400160405280601e81526020017f536166654d6174683a207375627472616374696f6e206f766572666c6f770000815250620041bd565b60008183620041a65760405162461bcd60e51b81526004018080602001828103825283818151815260200191508051906020019080838360005b838110156200416a57818101518382015260200162004150565b50505050905090810190601f168015620041985780820380516001836020036101000a031916815260200191505b509250505060405180910390fd5b506000838581620041b357fe5b0495945050505050565b60008184841115620042125760405162461bcd60e51b81526020600482018181528351602484015283519092839260449091019190850190808383600083156200416a57818101518382015260200162004150565b505050900390565b613027806200430983390190565b82805482825590600052602060002090810192821562004280579160200282015b828111156200428057825182546001600160a01b0319166001600160a01b0390911617825560209092019160019091019062004249565b506200428e929150620042d0565b5090565b5080546000825590600052602060002090810190620030ba9190620042f1565b60405180604001604052806002906020820280368337509192915050565b5b808211156200428e5780546001600160a01b0319168155600101620042d1565b5b808211156200428e5760008155600101620042f256fe60806040523480156200001157600080fd5b506040516200302738038062003027833981810160405260a08110156200003757600080fd5b50805160208201516040830151606084015160809094015160018055929391929091903361f00514620000b1576040805162461bcd60e51b815260206004820152601860248201527f56616c696461746f727320636f6e7472616374206f6e6c790000000000000000604482015290519081900360640190fd5b846001600160a01b03811662000100576040805162461bcd60e51b815260206004820152600f60248201526e496e76616c6964206164647265737360881b604482015290519081900360640190fd5b846001600160a01b0381166200014f576040805162461bcd60e51b815260206004820152600f60248201526e496e76616c6964206164647265737360881b604482015290519081900360640190fd5b838560018260018111156200016057fe5b1415620001b757612710811115620001b1576040805162461bcd60e51b815260206004820152600f60248201526e125b9d985b1a59081c195c98d95b9d608a1b604482015290519081900360640190fd5b62000235565b620001ee600a620001da6003612710620002c660201b620027811790919060201c565b6200032d60201b620027e31790919060201c565b81111562000235576040805162461bcd60e51b815260206004820152600f60248201526e125b9d985b1a59081c195c98d95b9d608a1b604482015290519081900360640190fd5b6002805462010000600160b01b031916620100006001600160a01b038c81169190910291909117808355600380546001600160a01b031916928c1692909217909155600589905587919060ff1916600183818111156200029157fe5b02179055506002805486919061ff001916610100836003811115620002b257fe5b02179055505050505050505050506200041e565b600082620002d75750600062000327565b82820282848281620002e557fe5b0414620003245760405162461bcd60e51b8152600401808060200182810382526021815260200180620030066021913960400191505060405180910390fd5b90505b92915050565b60006200032483836040518060400160405280601a81526020017f536166654d6174683a206469766973696f6e206279207a65726f0000000000008152506200037760201b60201c565b60008183620004075760405162461bcd60e51b81526004018080602001828103825283818151815260200191508051906020019080838360005b83811015620003cb578181015183820152602001620003b1565b50505050905090810190601f168015620003f95780820380516001836020036101000a031916815260200191505b509250505060405180910390fd5b5060008385816200041457fe5b0495945050505050565b612bd8806200042e6000396000f3fe6080604052600436106102465760003560e01c80638129fc1c11610139578063ba26d9ff116100b6578063ec0cb3361161007a578063ec0cb3361461029b578063ef984eb51461063f578063f06d5e7714610654578063f1cea4c71461067e578063f3b1cc6714610693578063ff3d9e4f146106a857610246565b8063ba26d9ff146105bc578063c19d93fb146105d1578063c967f90f146105f6578063d0e30db014610622578063e9fad8ee1461062a57610246565b806397a8ccd5116100fd57806397a8ccd5146104fe5780639e83d5b114610506578063a3ec138d1461051b578063a3fbbaae14610574578063a6606679146105a757610246565b80638129fc1c1461047e578063826d3dec146104935780638ec7a23d146104a85780638f76691a146104d45780639001eed8146104e957610246565b8063481c6a75116101c7578063697dc3a71161018b578063697dc3a71461040057806370ba11131461041557806371a1bb751461042a57806372a11da41461043f578063741579b11461046957610246565b8063481c6a7514610365578063483a00e81461037a5780634df9d6ba1461038257806358fd41ea146103b5578063683c529c146103ca57610246565b80632e4f67e41161020e5780632e4f67e41461029b5780633a5381b5146102da5780633ccfd60b1461030b57806341f4ca621461032257806344f999001461035057610246565b806303fab4f61461024b578063158ef93e1461027257806315de360e1461029b57806324c5b1ca146102b05780632b8aba7a146102c5575b600080fd5b34801561025757600080fd5b506102606106b0565b60408051918252519081900360200190f35b34801561027e57600080fd5b506102876106bd565b604080519115158252519081900360200190f35b3480156102a757600080fd5b506102606106c6565b3480156102bc57600080fd5b506102606106cd565b3480156102d157600080fd5b506102606106d3565b3480156102e657600080fd5b506102ef6106d9565b604080516001600160a01b039092168252519081900360200190f35b34801561031757600080fd5b506103206106ee565b005b34801561032e57600080fd5b5061033761086c565b6040805192835260208301919091528051918290030190f35b34801561035c57600080fd5b506102ef610875565b34801561037157600080fd5b506102ef61087b565b61032061088a565b34801561038e57600080fd5b50610260600480360360208110156103a557600080fd5b50356001600160a01b0316610c69565b3480156103c157600080fd5b50610260610d8e565b3480156103d657600080fd5b506103df610e31565b604051808260018111156103ef57fe5b815260200191505060405180910390f35b34801561040c57600080fd5b50610260610e3a565b34801561042157600080fd5b50610260610e40565b34801561043657600080fd5b506102ef610e46565b34801561044b57600080fd5b506103206004803603602081101561046257600080fd5b5035610e4c565b34801561047557600080fd5b5061026061116b565b34801561048a57600080fd5b50610320611177565b34801561049f57600080fd5b50610320611273565b3480156104b457600080fd5b50610320600480360360208110156104cb57600080fd5b503515156114cc565b3480156104e057600080fd5b506102606116ba565b3480156104f557600080fd5b506102606116c0565b6103206116ce565b34801561051257600080fd5b5061032061185c565b34801561052757600080fd5b5061054e6004803603602081101561053e57600080fd5b50356001600160a01b0316611bea565b604080519485526020850193909352838301919091526060830152519081900360800190f35b34801561058057600080fd5b506103206004803603602081101561059757600080fd5b50356001600160a01b0316611c11565b3480156105b357600080fd5b50610320611cb9565b3480156105c857600080fd5b50610320611e82565b3480156105dd57600080fd5b506105e6612049565b604051808260038111156103ef57fe5b34801561060257600080fd5b5061060b612057565b6040805161ffff9092168252519081900360200190f35b61032061205c565b34801561063657600080fd5b506103206122e4565b34801561064b57600080fd5b50610260612491565b34801561066057600080fd5b506103206004803603602081101561067757600080fd5b503561256a565b34801561068a57600080fd5b506102606126ba565b34801561069f57600080fd5b506102606126c0565b6103206126c7565b68056bc75e2d6310000081565b60005460ff1681565b6201518081565b600d5481565b600c5481565b6002546201000090046001600160a01b031681565b60026001541415610734576040805162461bcd60e51b815260206004820152601f6024820152600080516020612b08833981519152604482015290519081900360640190fd5b600260015533600090815260096020526040902060030154620151809061075c904390612825565b116107a3576040805162461bcd60e51b8152602060048201526012602482015271125b9d195c9d985b081d1bdbc81cdb585b1b60721b604482015290519081900360640190fd5b33600090815260096020526040902060020154610802576040805162461bcd60e51b815260206004820152601860248201527756616c75652073686f756c64206e6f74206265207a65726f60401b604482015290519081900360640190fd5b336000818152600960205260408120600281018054908390556003909101919091559061082f9082612867565b60408051828152905133917f884edad9ce6fa2440d8a54cc123490eb96d2768479d49ff9c7366125a9424364919081900360200190a25060018055565b60065460075482565b61f00681565b6003546001600160a01b031681565b6003546001600160a01b031633146108e0576040805162461bcd60e51b815260206004820152601460248201527313db9b1e481b585b9859d95c88185b1b1bddd95960621b604482015290519081900360640190fd5b6108e8612951565b61092b576040805162461bcd60e51b815260206004820152600f60248201526e496e636f727265637420737461746560881b604482015290519081900360640190fd5b600d54158061095057506206270061094e600d544361282590919063ffffffff16565b115b61099c576040805162461bcd60e51b8152602060048201526018602482015277092dce8cae4ecc2d840dcdee840d8dedcce40cadcdeeaced60431b604482015290519081900360640190fd5b600034116109ec576040805162461bcd60e51b815260206004820152601860248201527756616c75652073686f756c64206e6f74206265207a65726f60401b604482015290519081900360640190fd5b6000600d556004546109fe90346129b1565b60045560408051348152905133917f278e696bd0cd4a7d1260ced26c40cd01c2b088f441889e4148240ac81069b348919081900360200190a26000600160025460ff166001811115610a4c57fe5b1415610ac05761f0056001600160a01b0316636d379efe6040518163ffffffff1660e01b815260040160206040518083038186803b158015610a8d57600080fd5b505afa158015610aa1573d6000803e3d6000fd5b505050506040513d6020811015610ab757600080fd5b50519050610b2a565b61f0056001600160a01b0316631a2906926040518163ffffffff1660e01b815260040160206040518083038186803b158015610afb57600080fd5b505afa158015610b0f573d6000803e3d6000fd5b505050506040513d6020811015610b2557600080fd5b505190505b8060045410610c66576002805461ff0019166101001790819055604080516363e1d45160e01b8152620100009092046001600160a01b031660048301525161f006916363e1d45191602480830192600092919082900301818387803b158015610b9257600080fd5b505af1158015610ba6573d6000803e3d6000fd5b5050505061f0056001600160a01b031663136ec0b36040518163ffffffff1660e01b8152600401600060405180830381600087803b158015610be757600080fd5b505af1158015610bfb573d6000803e3d6000fd5b505043600e555050600254610100900460ff166003811115610c1957fe5b604051600080516020612b6283398151915290600090a2600e5460408051918252517fafd1e32290217ae4347a38273df068d746c185c201f67d46596e6764469b45639181900360200190a15b50565b60408051637a0787a960e11b81523060048201529051600091829161f0059163f40f0f52916024808301926020929190829003018186803b158015610cad57600080fd5b505afa158015610cc1573d6000803e3d6000fd5b505050506040513d6020811015610cd757600080fd5b5051600554909150600090610cfb9061271090610cf5908590612781565b906127e3565b600a54600b549192509015610d4257610d3f81610d39600b54610cf5670de0b6b3a7640000610d33888a61282590919063ffffffff16565b90612781565b906129b1565b90505b6001600160a01b038516600090815260096020526040902060018101549054610d859190610d7f90670de0b6b3a764000090610cf5908690612781565b90612825565b95945050505050565b60408051637a0787a960e11b81523060048201529051600091829161f0059163f40f0f52916024808301926020929190829003018186803b158015610dd257600080fd5b505afa158015610de6573d6000803e3d6000fd5b505050506040513d6020811015610dfc57600080fd5b5051600554909150600090610e1a9061271090610cf5908590612781565b600854909150610e2a90826129b1565b9250505090565b60025460ff1681565b600e5481565b60055481565b61f00581565b60026001541415610e92576040805162461bcd60e51b815260206004820152601f6024820152600080516020612b08833981519152604482015290519081900360640190fd5b600260015580610ee4576040805162461bcd60e51b815260206004820152601860248201527756616c75652073686f756c64206e6f74206265207a65726f60401b604482015290519081900360640190fd5b33600090815260096020526040902054811115610f3e576040805162461bcd60e51b8152602060048201526013602482015272125b9cdd59999a58da595b9d08185b5bdd5b9d606a1b604482015290519081900360640190fd5b61f0056001600160a01b031663c885bc586040518163ffffffff1660e01b8152600401600060405180830381600087803b158015610f7b57600080fd5b505af1158015610f8f573d6000803e3d6000fd5b505033600090815260096020526040812060018101549054600a54929450610fcb93509091610d7f91670de0b6b3a764000091610cf591612781565b600b54909150610fdb9083612825565b600b5533600090815260096020526040902054610ff89083612825565b336000908152600960205260409020819055600a5461102591670de0b6b3a764000091610cf59190612781565b336000908152600960205260409020600190810191909155600254610100900460ff16600381111561105357fe5b14156110af5761f0056001600160a01b031663bb8b65af6040518163ffffffff1660e01b8152600401600060405180830381600087803b15801561109657600080fd5b505af11580156110aa573d6000803e3d6000fd5b505050505b336000908152600960205260409020600201546110cc90836129b1565b3360008181526009602052604090206002810192909255436003909201919091556110f79082612867565b60408051838152905133917f41b45db803eded5e27cdf3cbba5707b3575e9b6959de41c3f7b83b51ce600502919081900360200190a260408051828152905133917f7cddc560d4de1ea9d83e4123f01e6072afc503bb47bcc765f0396ba3861a0454919081900360200190a2505060018055565b670de0b6b3a764000081565b3361f005146111c8576040805162461bcd60e51b815260206004820152601860248201527756616c696461746f727320636f6e7472616374206f6e6c7960401b604482015290519081900360640190fd5b60005460ff1615611216576040805162461bcd60e51b8152602060048201526013602482015272105b1c9958591e481a5b9a5d1a585b1a5e9959606a1b604482015290519081900360640190fd5b6000805460ff191660011781556040805163136ec0b360e01b8152905161f0059263136ec0b3926004808201939182900301818387803b15801561125957600080fd5b505af115801561126d573d6000803e3d6000fd5b50505050565b3361f006146112c0576040805162461bcd60e51b815260206004820152601460248201527350756e69736820636f6e7472616374206f6e6c7960601b604482015290519081900360640190fd5b43600c5560028054610100900460ff1660038111156112db57fe5b1461131c576002805461ff0019166103001790819055610100900460ff16600381111561130457fe5b604051600080516020612b6283398151915290600090a25b61f0056001600160a01b03166371df76786040518163ffffffff1660e01b8152600401600060405180830381600087803b15801561135957600080fd5b505af115801561136d573d6000803e3d6000fd5b50505050600061f0056001600160a01b031663dbeffe266040518163ffffffff1660e01b815260040160206040518083038186803b1580156113ae57600080fd5b505afa1580156113c2573d6000803e3d6000fd5b505050506040513d60208110156113d857600080fd5b50516004549091506000908211156113f2576004546113f4565b815b905080156114c8576004546114099082612825565b60048190555061147f61f0056001600160a01b031663be1ff5d96040518163ffffffff1660e01b815260040160206040518083038186803b15801561144d57600080fd5b505afa158015611461573d6000803e3d6000fd5b505050506040513d602081101561147757600080fd5b505182612867565b600254604080518381529051620100009092046001600160a01b0316917febbcaaf6b9aa8b4083ae4b2f842c8de6f75319018e7b5e141a1e87aebadde6c3916020908290030190a25b5050565b3361f0051461151d576040805162461bcd60e51b815260206004820152601860248201527756616c696461746f727320636f6e7472616374206f6e6c7960401b604482015290519081900360640190fd5b80156116235761152b612951565b8061154b57506001600254610100900460ff16600381111561154957fe5b145b61158e576040805162461bcd60e51b815260206004820152600f60248201526e496e636f727265637420737461746560881b604482015290519081900360640190fd5b6002805461ff0019166102001790819055610100900460ff1660038111156115b257fe5b604051600080516020612b6283398151915290600090a261f0056001600160a01b03166371df76786040518163ffffffff1660e01b8152600401600060405180830381600087803b15801561160657600080fd5b505af115801561161a573d6000803e3d6000fd5b50505050610c66565b60028054610100900460ff16600381111561163a57fe5b1461167e576040805162461bcd60e51b815260206004820152600f60248201526e496e636f727265637420737461746560881b604482015290519081900360640190fd5b6002805461ff00191690819055610100900460ff16600381111561169e57fe5b604051600080516020612b6283398151915290600090a2610c66565b60045481565b69010f0cf064dd5920000081565b60026001541415611714576040805162461bcd60e51b815260206004820152601f6024820152600080516020612b08833981519152604482015290519081900360640190fd5b60026001556003546001600160a01b0316331461176f576040805162461bcd60e51b815260206004820152601460248201527313db9b1e481b585b9859d95c88185b1b1bddd95960621b604482015290519081900360640190fd5b61f0056001600160a01b031663c885bc586040518163ffffffff1660e01b8152600401600060405180830381600087803b1580156117ac57600080fd5b505af11580156117c0573d6000803e3d6000fd5b5050505060006008541161180c576040805162461bcd60e51b815260206004820152600e60248201526d139bc81b5bdc99481c995dd85c9960921b604482015290519081900360640190fd5b60088054600090915561181f3382612867565b60408051828152905133917fe4fc75e2b70d2f179fc77c722f2334ba1507c59932576ec9620b15dfb06d91e2919081900360200190a25060018055565b600260015414156118a2576040805162461bcd60e51b815260206004820152601f6024820152600080516020612b08833981519152604482015290519081900360640190fd5b60026001556003546001600160a01b031633146118fd576040805162461bcd60e51b815260206004820152601460248201527313db9b1e481b585b9859d95c88185b1b1bddd95960621b604482015290519081900360640190fd5b611905612951565b611948576040805162461bcd60e51b815260206004820152600f60248201526e496e636f727265637420737461746560881b604482015290519081900360640190fd5b6000600d5411801561197057506206270061196e600d544361282590919063ffffffff16565b115b6119bc576040805162461bcd60e51b8152602060048201526018602482015277092dce8cae4ecc2d840dcdee840d8dedcce40cadcdeeaced60431b604482015290519081900360640190fd5b600060045411611a04576040805162461bcd60e51b815260206004820152600e60248201526d27379036b7b9329036b0b933b4b760911b604482015290519081900360640190fd5b6000600d81905550600061f0056001600160a01b031663ce8ef3726040518163ffffffff1660e01b815260040160206040518083038186803b158015611a4957600080fd5b505afa158015611a5d573d6000803e3d6000fd5b505050506040513d6020811015611a7357600080fd5b5051600e54611a83904390612825565b1015611b8b57611b02612710610cf561f0056001600160a01b031663a676bd856040518163ffffffff1660e01b815260040160206040518083038186803b158015611acd57600080fd5b505afa158015611ae1573d6000803e3d6000fd5b505050506040513d6020811015611af757600080fd5b505160045490612781565b9050611b4261f0056001600160a01b031663be1ff5d96040518163ffffffff1660e01b815260040160206040518083038186803b15801561144d57600080fd5b600254604080518381529051620100009092046001600160a01b0316917f318a9cd646c737e6331915189b674d6d06ae71b28df0f50e7a6dfe101a129387916020908290030190a25b600454600090611b9b9083612825565b60006004559050611bac3382612867565b60408051828152905133917f5d3b8fa9823b18b176cfe79e002a5b931b8569313802f700eb8550bc6a353246919081900360200190a2505060018055565b60096020526000908152604090208054600182015460028301546003909301549192909184565b6002546201000090046001600160a01b03163314611c6f576040805162461bcd60e51b815260206004820152601660248201527513db9b1e481d985b1a59185d1bdc88185b1b1bddd95960521b604482015290519081900360640190fd5b600380546001600160a01b0319166001600160a01b0383169081179091556040517f5cd5185727f6057b7a274979ce4d902e15bf0ef1dc542d1fe5926cba874f63b690600090a250565b6003546001600160a01b03163314611d0f576040805162461bcd60e51b815260206004820152601460248201527313db9b1e481b585b9859d95c88185b1b1bddd95960621b604482015290519081900360640190fd5b60025460065460ff909116906001826001811115611d2957fe5b1415611d7d57612710811115611d78576040805162461bcd60e51b815260206004820152600f60248201526e125b9d985b1a59081c195c98d95b9d608a1b604482015290519081900360640190fd5b611dd5565b611d8f600a610cf56127106003612781565b811115611dd5576040805162461bcd60e51b815260206004820152600f60248201526e125b9d985b1a59081c195c98d95b9d608a1b604482015290519081900360640190fd5b60075415801590611df657506007546201518090611df4904390612825565b115b611e42576040805162461bcd60e51b8152602060048201526018602482015277092dce8cae4ecc2d840dcdee840d8dedcce40cadcdeeaced60431b604482015290519081900360640190fd5b600680546005819055600091829055600782905560405190917f450a792501c47863e89114cbdd0497acb22d4abfc51dc315afc323c5ba92d4a991a25050565b3361f00614611ecf576040805162461bcd60e51b815260206004820152601460248201527350756e69736820636f6e7472616374206f6e6c7960601b604482015290519081900360640190fd5b61f0056001600160a01b031663c885bc586040518163ffffffff1660e01b8152600401600060405180830381600087803b158015611f0c57600080fd5b505af1158015611f20573d6000803e3d6000fd5b50505050600061f0056001600160a01b031663dbeffe266040518163ffffffff1660e01b815260040160206040518083038186803b158015611f6157600080fd5b505afa158015611f75573d6000803e3d6000fd5b505050506040513d6020811015611f8b57600080fd5b50516008549091506000908211611fa25781611fa6565b6008545b600854909150611fb69082612825565b60085580156114c857611ffd61f0056001600160a01b031663be1ff5d96040518163ffffffff1660e01b815260040160206040518083038186803b15801561144d57600080fd5b600254604080518381529051620100009092046001600160a01b0316917f0a3c8b346f3f7fe5668c9f575473491c4274339e10c9548d7995f22211f988f0916020908290030190a25050565b600254610100900460ff1681565b601581565b600260015414156120a2576040805162461bcd60e51b815260206004820152601f6024820152600080516020612b08833981519152604482015290519081900360640190fd5b600260018190555061f0056001600160a01b031663c885bc586040518163ffffffff1660e01b8152600401600060405180830381600087803b1580156120e757600080fd5b505af11580156120fb573d6000803e3d6000fd5b505033600090815260096020526040812060018101549054600a5492945061213793509091610d7f91670de0b6b3a764000091610cf591612781565b90503415612258573360009081526009602052604090205461215990346129b1565b336000908152600960205260409020819055600a5461218691670de0b6b3a764000091610cf59190612781565b33600090815260096020526040902060010155600b546121a690346129b1565b600b5560408051348152905133917fe1fffcc4923d04b559f4d29a8bfc6cda04eb5b0d3c460751c2402c5c5cc9109c919081900360200190a26001600254610100900460ff1660038111156121f757fe5b14156122535761f0056001600160a01b031663136ec0b36040518163ffffffff1660e01b8152600401600060405180830381600087803b15801561223a57600080fd5b505af115801561224e573d6000803e3d6000fd5b505050505b612296565b600a543360009081526009602052604090205461228291670de0b6b3a764000091610cf591612781565b336000908152600960205260409020600101555b80156122dd576122a63382612867565b60408051828152905133917f7cddc560d4de1ea9d83e4123f01e6072afc503bb47bcc765f0396ba3861a0454919081900360200190a25b5060018055565b6003546001600160a01b0316331461233a576040805162461bcd60e51b815260206004820152601460248201527313db9b1e481b585b9859d95c88185b1b1bddd95960621b604482015290519081900360640190fd5b6001600254610100900460ff16600381111561235257fe5b14806123615750612361612951565b6123a4576040805162461bcd60e51b815260206004820152600f60248201526e496e636f727265637420737461746560881b604482015290519081900360640190fd5b43600d556000600254610100900460ff1660038111156123c057fe5b14612452576002805461ff00191690819055610100900460ff1660038111156123e557fe5b604051600080516020612b6283398151915290600090a261f0056001600160a01b03166371df76786040518163ffffffff1660e01b8152600401600060405180830381600087803b15801561243957600080fd5b505af115801561244d573d6000803e3d6000fd5b505050505b600254604051620100009091046001600160a01b0316907f7c79e6e24ed041d1072d54523b53956f01b91b835f0490856370594d9d14470e90600090a2565b6000806000905061f0056001600160a01b031663ce8ef3726040518163ffffffff1660e01b815260040160206040518083038186803b1580156124d357600080fd5b505afa1580156124e7573d6000803e3d6000fd5b505050506040513d60208110156124fd57600080fd5b5051600e5461250d904390612825565b101561255a57612557612710610cf561f0056001600160a01b031663a676bd856040518163ffffffff1660e01b815260040160206040518083038186803b158015611acd57600080fd5b90505b600454600090610e2a9083612825565b6003546001600160a01b031633146125c0576040805162461bcd60e51b815260206004820152601460248201527313db9b1e481b585b9859d95c88185b1b1bddd95960621b604482015290519081900360640190fd5b60025460ff168160018260018111156125d557fe5b141561262957612710811115612624576040805162461bcd60e51b815260206004820152600f60248201526e125b9d985b1a59081c195c98d95b9d608a1b604482015290519081900360640190fd5b612681565b61263b600a610cf56127106003612781565b811115612681576040805162461bcd60e51b815260206004820152600f60248201526e125b9d985b1a59081c195c98d95b9d608a1b604482015290519081900360640190fd5b60068390554360075560405183907f2dcbffddb492dea86de0b18dac6d71f51a7b7a5ec946512e0c993a050f3b48ea90600090a2505050565b600b5481565b6206270081565b3361f00514612718576040805162461bcd60e51b815260206004820152601860248201527756616c696461746f727320636f6e7472616374206f6e6c7960401b604482015290519081900360640190fd5b6000612735612710610cf56005543461278190919063ffffffff16565b60085490915061274590826129b1565b600855600b5415610c665761277b600a54610d39600b54610cf5670de0b6b3a7640000610d33873461282590919063ffffffff16565b600a5550565b600082612790575060006127dd565b8282028284828161279d57fe5b04146127da5760405162461bcd60e51b8152600401808060200182810382526021815260200180612b826021913960400191505060405180910390fd5b90505b92915050565b60006127da83836040518060400160405280601a81526020017f536166654d6174683a206469766973696f6e206279207a65726f000000000000815250612a0b565b60006127da83836040518060400160405280601e81526020017f536166654d6174683a207375627472616374696f6e206f766572666c6f770000815250612aad565b804710156128bc576040805162461bcd60e51b815260206004820152601d60248201527f416464726573733a20696e73756666696369656e742062616c616e6365000000604482015290519081900360640190fd5b6040516000906001600160a01b0384169083908381818185875af1925050503d8060008114612907576040519150601f19603f3d011682016040523d82523d6000602084013e61290c565b606091505b505090508061294c5760405162461bcd60e51b815260040180806020018281038252603a815260200180612b28603a913960400191505060405180910390fd5b505050565b600080600254610100900460ff16600381111561296a57fe5b14806129ac57506003600254610100900460ff16600381111561298957fe5b1480156129ac5750620151806129aa600c544361282590919063ffffffff16565b115b905090565b6000828201838110156127da576040805162461bcd60e51b815260206004820152601b60248201527f536166654d6174683a206164646974696f6e206f766572666c6f770000000000604482015290519081900360640190fd5b60008183612a975760405162461bcd60e51b81526004018080602001828103825283818151815260200191508051906020019080838360005b83811015612a5c578181015183820152602001612a44565b50505050905090810190601f168015612a895780820380516001836020036101000a031916815260200191505b509250505060405180910390fd5b506000838581612aa357fe5b0495945050505050565b60008184841115612aff5760405162461bcd60e51b8152602060048201818152835160248401528351909283926044909101919085019080838360008315612a5c578181015183820152602001612a44565b50505090039056fe5265656e7472616e637947756172643a207265656e7472616e742063616c6c00416464726573733a20756e61626c6520746f2073656e642076616c75652c20726563697069656e74206d61792068617665207265766572746564402ee26d4c255fcb07b0b7b5b93b77377832260977c25be44f3c8feffd2df70e536166654d6174683a206d756c7469706c69636174696f6e206f766572666c6f77a2646970667358221220ad9049550ee7fb7d4d216ee54d05ca5b8904d2e8462c16ee81c1ddf3add6e1fb64736f6c634300060c0033536166654d6174683a206d756c7469706c69636174696f6e206f766572666c6f77416464726573733a20756e61626c6520746f2073656e642076616c75652c20726563697069656e74206d61792068617665207265766572746564536166654d6174683a206d756c7469706c69636174696f6e206f766572666c6f77436f72726573706f6e64696e6720766f746520706f6f6c206e6f7420666f756e64a2646970667358221220ff05ea7f087180dac47c60624964ae3fe14aa47a7215f4a12babb788cc09c9de64736f6c634300060c0033"
)

type hardForkSysContractV3 struct {
}

func (s *hardForkSysContractV3) GetName() string {
	return ValidatorsV1ContractName
}

func (s *hardForkSysContractV3) Update(config *params.ChainConfig, height *big.Int, state *state.StateDB) (err error) {
	contractCode := common.FromHex(validatorsV3Code)

	//write validatorsV3Code to sys contract
	state.SetCode(ValidatorsV1ContractAddr, contractCode)
	log.Debug("Upgrade code to system contract account", "addr", ValidatorsV1ContractAddr.String(), "code", validatorsV3Code)

	return
}

func (s *hardForkSysContractV3) Execute(state *state.StateDB, header *types.Header, chainContext core.ChainContext, config *params.ChainConfig) (err error) {

	return
}
